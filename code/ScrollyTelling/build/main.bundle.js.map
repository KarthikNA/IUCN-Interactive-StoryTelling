{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./Chart1Overview/chart1.js","webpack:///./Chart2Map/main.js","webpack:///./Chartbubble/extinctBubbleChart.js","webpack:///./disintegrateAnimal.js","webpack:///./forestcoverplot/forestcover.js","webpack:///./industrializationplot/industrializationplot.js","webpack:///./overview-bubble-flags/script-copy.js","webpack:///./scrollAnimatedStackedPlot.js","webpack:///./scrollFirstHandler.js","webpack:///./scrollForestCover.js","webpack:///./scrollSecondHandler.js","webpack:///./scrollStackedPercentHandler.js","webpack:///./scrollStackedPlotHandler.js","webpack:///./scrollThirdHandler.js","webpack:///./scrolly.js","webpack:///./stacked plot/animatedStackedPlot.js"],"names":["ChartOverview","constructor","chartOverviewsvg","d3","select","svgOverviewWidth","attr","svgOverviewHeight","chartOverviewPadding","top","right","bottom","left","chartOverviewHeight","chartOverviewWidth","chartOverviewspecies","chartOverviewColorScale","slideOneChart","setDataset","dataset","setScale","xScale","yScale","chartOverviewInstance","csv","then","console","log","speciesInformation","forEach","s","filter","d","AssessType","obj","year","qty","species","push","sort","a","b","threatenedAmount","dateExtent","extent","map","threatenedExtent","scaleLinear","domain","range","nested","nest","key","company","entries","statistics","Object","keys","index","value","selectAll","data","enter","append","i","tx","ty","xAxis","axisBottom","tickFormat","format","call","yAxis","axisLeft","text","colorScheme","scaleOrdinal","drawLinePlotForOverview","lineInterpolate","line","x","y","style","each","node","totalLength","getTotalLength","transition","duration","delay","ease","easeLinear","legendRectSize","legendSpacing","mapChloropeth","mapsvg","mapsvgWidth","mapsvgHeight","width","height","expressed","path","projection","dataMammals","dataReptiles","dataBirds","dataAmphibians","mammalsExtent","BirdExtent","ReptilesExtent","AmphibiansExtent","geoNaturalEarth","scale","Math","PI","translate","geoPath","setExpressed","mapColorScale","category","color","scaleSequential","interpolateBlues","mapOverViewInstance","createLegend","extentValue","colorNew","cb","colorbarV","mouseOverEvent","toolTip","show","mouseOutEvent","hide","ready","topo","error","tip","offset","direction","html","Name","name","mammals","birds","amphibians","reptiles","recolorMap","countries","features","get","id","choropleth","on","mousehoverEvent1","changeAttribute","info","hover_text","exit","remove","hover_text_new","merge","attribute","c","promises","json","Promise","all","set","code","Mammals","Reptiles","Amphibians","Birds","values","padding","clusterPadding","maxRadius","categories","Array","from","Set","n","length","m","colorarray","clusters","getNodes","dist","elem","findIndex","r","size","cluster","radius","cos","random","sin","nodes","svg","sciname","commonname","year1","year2","strength","force","alpha","l","sqrt","initialize","_","removeAll","drawNodes","targetCenter","layoutTick","e","forceSimulation","forceCenter","forceCollide","targets","drawTargets","draw","count","disintegrateElement","document","querySelector","window","addEventListener","el","dises","disintegrate","getDisObj","disObj","disType","setTimeout","container","classList","add","resetCSSAnimation","animation","ExplodeToRightParticle","animationDuration","speed","life","remainingLife","firstRun","ctx","startX","beginPath","arc","startY","fillStyle","rgbArray","fill","addParticleType","genNormalizedVal","EaseIn","power","t","pow","EaseOut","abs","EaseInOut","HollowCircles","widthScaler","round","numWaves","xPosFunc","heightScaler","yPosFunc","startRadius","sizeFunc","opacityFactor","opacityFunc","percent","currX","currY","currOpacity","strokeStyle","stroke","ForestCover","forestMargin","forestWidth","forestHeight","forestSvg","forestDots","forestDataTime","Date","selectedYear","rScale","setSelectedYear","forest","parseFloat","rscale","scaleSqrt","tickSize","tickValues","ticks","buildGraph","newYear","circles","newCircles","Area","mousehoverEvent","IndustrializationPlot","industrializationsvg","industrializationsvgWidth","industrializationsvgHeight","industrializationPadding","industrializationwHeight","industrializationWidth","industrializationChartTyep","setIndicators","indicators","setCountries","xCountryScale","setIndicatorCountryWiseInformation","indicatorCountryWiseInformation","setIndicatorYearWiseInformation","indicatorYearWiseInformation","industrializationPlotInstance","headerNames","uniqueIndicators","indicatorsId","indicatorsInfo","element","createOptionsForSelection","countryId","countriesInfo","createOptionsForCountry","indicator","filteredIndicator","getYearWiseInformation","arr","getYearInformation","getMedian","paramId","prevParam","drawLineChart","yearId","drawBubblePlot","countryExtent","valueAmount","concat","valueExtent","slideChart","find","dataTime","sliderTime","sliderBottom","min","max","step","timeFormat","default","val","selected_year","countryCodes","$","buildBubblePlot","gTime","countryIndex","stats","details","v","slideChartEnter","circleneter","colorBrewer","interpolator","interpolateYlGnBu","country","dc","toFixed","getElementById","opt","createElement","innerHTML","appendChild","mouse","mouseyear","floor","invert","message","instance","start","end","information","yearwise","filtered","median","select2","placeholder","allowClear","event","target","chartTypeParamter","conditionalCallBack","chartTypeParameter","BubbleOverview","bubbleOverViewIntance","createBubbleChart","continentNames","CR","VU","EX","LC","EN","NT","meanCR","mean","CRExtent","CRScaleX","CRScaleY","meanVU","VUExtent","VUScaleX","VUScaleY","meanEX","EXExtent","EXScaleX","EXScaleY","meanLC","LCExtent","LCScaleX","LCScaleY","meanNT","NTExtent","NTScaleX","NTScaleY","meanEN","ENExtent","ENScaleX","ENScaleY","continents","ContinentCode","continentColorScale","schemeCategory10","circleSize","circleRadiusScale","isChecked","forces","createSVG","toggleContinentKey","flagFill","createCircles","createForces","createForceSimulation","addFlagDefinitions","addFillListener","addGroupingListeners","showContinentKey","keyElementWidth","keyElementHeight","onScreenYOffset","offScreenYOffset","empty","createContinentKey","continentKey","translateContinentKey","keyWidth","continentKeyScale","scaleBand","textHeight","getBBox","unneededTextHeight","translation","elementID","radio","selectorId","property","formatPopulation","updateCountryInfo","updateCircles","CountryName","join","CountryCode","forceStrength","combine","createCombineForces","countryCenters","createCountryCenterForces","continent","createContinentForces","population","createPopulationForces","vulnerable","createVulnerableForces","leastconcern","createleastconcernForces","endangered","createendangeredForces","nearthreatened","createnearthreatenedForces","extinct","createExtinctForces","forceX","forceY","projectionStretchY","projectionMargin","geoEquirectangular","CenterLongitude","CenterLatitude","continentForceX","continentForceY","center","dimension","continentNamesDomain","continentCode","scaledCRMargin","centerCirclesInScaleBandOffset","bandwidth","scaledNTMargin","scaledVUMargin","scaledEXMargin","scaledENMargin","scaledLCMargin","countryCenterGrouping","populationGrouping","leastconcernGrouping","endangeredGrouping","extinctGrouping","nearthreatenedGrouping","vulnerableGrouping","defs","addListener","selector","updateForces","togglePopulationAxes","toggleVulnerableAxis","toggleExtinctAxis","toggleEndangeredAxis","toggleNearThreatenedAxis","toggleLeastConcernAxis","alphaTarget","restart","showAxes","onScreenXOffset","offScreenXOffset","createAxesCR","translateAxis","numberOfTicks","axis","createAxesVU","createAxesEN","createAxesLC","createAxesEX","createAxesNT","rendered","handleStepEnterAnimatedStackedPlot","response","callback","handleStepExitAnimatedStackedPlot","handleStepProgressAnimatedStackedPlot","handleStepEnterFirst","handleStepExitFirst","handleStepProgressFirst","handleStepEnterForestPlot","handleStepExitForestPlot","handleStepProgressForestPlot","handleStepEnterSecond","handleStepExitSecond","handleStepProgressSecond","handleStepEnterStackedPercentPlot","handleStepExitStackedPercentPlot","handleStepProgressStackedPercentPlot","handleStepEnterStackedPlot","handleStepExitStackedPlot","handleStepProgressStackedPlot","handleStepEnterThird","handleStepExitThird","handleStepProgressThird","ScrollerFirst","ScrollerSecond","ScrollerThird","ScrollerStackedPlot","ScrollerForestPlot","ScrollerAnimatedStackedPlot","init","setUpBody","setUpScrollerFirst","setUpScrollerSecond","setUpScrollerThird","setUpScrollerAnimatedStackedPlot","setupScrollForestPlot","setUpCarousel","Scroller","resize","texts","steps","querySelectorAll","toggleClass","scrollama","setup","onStepEnter","chartOverview","onStepExit","onStepProgress","setUpScrollerStackedPlot","setUpScrollerStackedPercentPlot","forestPlt","animatedStackedPlt","carousel","interval","pause","AnimatedStackedPlot","animatedSvgMargin","animatedSvg","aspt","dataFile","drawBars","input","canvas","setUpSvgCanvas","params","update","margin","formattedData","formatData","blockData","binNames","clusterNames","colorScaleStacked","setUpColors","scales","initializeScales","xScaleStacked","yScaleStacked","y1","nice","initializeAxis","barStacked","bar","heights","setUpHeights","maxPerBin","setUpMax","chosen","legend","view","svgAnimated","transDuration","newView","y0","axisY","choice","indexOf","getComputedTextLength","myHeight","clusterVec","lastClusterElements","maxDict","variable","nullCase","targetCase","notTargetCase","rangeRound","Type","j","block"],"mappings":"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","file":"main.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./scrolly.js\");\n","/*\n * File: chart1.js\n * Project: code\n * File Created: October 2019\n * Author: Shalini Chaudhuri (you@you.you)\n */\n\n\nclass ChartOverview {\n    constructor() {\n        this.chartOverviewsvg = d3.select('#chart1').select('svg');\n        this.svgOverviewWidth = +this.chartOverviewsvg.attr('width');\n        this.svgOverviewHeight = +this.chartOverviewsvg.attr('height');\n        this.chartOverviewPadding = {top: 20, right: 20, bottom: 60, left: 60};\n        this.chartOverviewHeight = this.svgOverviewHeight - this.chartOverviewPadding.top - this.chartOverviewPadding.bottom;\n        this.chartOverviewWidth = this.svgOverviewWidth - this.chartOverviewPadding.right - this.chartOverviewPadding.left;\n        this.chartOverviewspecies = '';\n        this.chartOverviewColorScale = '';\n        this.slideOneChart = '';\n    }    \n\n    setDataset(dataset) {\n        this.dataset = dataset;\n    }\n\n    setScale(xScale, yScale) {\n        this.xScale = xScale;\n        this.yScale = yScale;\n    }\n}\n\n\nvar chartOverviewInstance = new ChartOverview(); // init once and then keep reusing\n\nd3.csv('./data-csv/Table1b.csv').then((dataset) => {\n    console.log(dataset);\n\n    chartOverviewInstance.setDataset(dataset);\n\n    // nest by species\n    chartOverviewInstance.chartOverviewspecies = ['Mammals', 'Birds', 'Amphibians', 'Reptiles', 'Fishes'];\n    let speciesInformation = {};\n\n    // get data for each species per year\n    chartOverviewInstance.chartOverviewspecies.forEach(s => {\n        speciesInformation[s] = [];\n        dataset.filter(d => d.AssessType === 'Total threatened').forEach(d => {\n            let obj = {};\n            obj.year = +d['Year'];\n            obj.qty = +d[s];\n            obj.species = s;\n            speciesInformation[s].push(obj);\n        });\n        // sort the array based on years\n        speciesInformation[s].sort((a, b) => a.year - b.year);\n    });\n\n    console.log(speciesInformation);\n    \n    let threatenedAmount = []\n    chartOverviewInstance.chartOverviewspecies.forEach(s => {\n        speciesInformation[s].forEach(d => {\n            // add the species population to list\n            threatenedAmount.push(+d.qty);\n        });\n    });\n\n    let dateExtent = d3.extent(dataset.map(d => +d['Year']));\n    let threatenedExtent = d3.extent(threatenedAmount);\n\n    let xScale =  d3.scaleLinear()\n                    .domain(dateExtent)\n                    .range([0, chartOverviewInstance.chartOverviewWidth])\n    let yScale = d3.scaleLinear()\n                    .domain(threatenedExtent)\n                    .range([chartOverviewInstance.chartOverviewHeight, 0])\n    \n    chartOverviewInstance.setScale(xScale, yScale);\n\n    let nested = d3.nest()\n                .key(function(d) {\n                    return d.company; // Nest by company name\n                })\n                .entries(speciesInformation);\n\n    let statistics = [];\n    Object.keys(speciesInformation).forEach((s, index) => {\n        statistics.push({key: s, value: speciesInformation[s], species: s});\n    });\n\n    console.log(statistics);\n\n    chartOverviewInstance.slideOneChart = chartOverviewInstance.chartOverviewsvg.selectAll('.chart')\n        .data(statistics)\n        .enter()\n        .append('g')\n        .attr('class', 'chart')\n        .attr('transform', function(d,i) {\n            var tx =  chartOverviewInstance.chartOverviewPadding.right + chartOverviewInstance.chartOverviewPadding.left;\n            var ty =  chartOverviewInstance.chartOverviewPadding.top;\n            return 'translate('+[tx, ty]+')';\n        });\n\n    var xAxis = d3.axisBottom(xScale).tickFormat(d3.format(\"d\"));\n    chartOverviewInstance.slideOneChart.append('g')\n        .attr('class', 'x axis')\n        .attr('transform', 'translate(0,'+chartOverviewInstance.chartOverviewHeight+')')\n        .call(xAxis);\n\n    var yAxis = d3.axisLeft(yScale);\n    chartOverviewInstance.slideOneChart.append('g')\n        .attr('class', 'y axis')\n        .attr('transform', 'translate(0,0)')\n        .call(yAxis);\n    \n\n    chartOverviewInstance.slideOneChart.append('text')\n        .attr('class', 'x axis-label')\n        .attr('transform', 'translate('+[chartOverviewInstance.chartOverviewWidth / 2, chartOverviewInstance.chartOverviewHeight + 34]+')')\n        .text('Year');\n\n    chartOverviewInstance.slideOneChart.append('text')\n        .attr('class', 'y axis-label')\n        .attr('transform', 'translate('+[-50, chartOverviewInstance.chartOverviewHeight / 2 + chartOverviewInstance.chartOverviewPadding.bottom]+') rotate(270)')\n        .text('No of threatened species');\n\n    // for each species: \n    /*\n     * Mammals, Birds, Amphibians, Fishes, Reptiles \n     ['gray', 'yellow', 'green' ,'blue','brown']\n     */\n\n    let colorScheme = ['#ddd', '#f3bb09','#129812','#0c0cca','#771e1e']\n    chartOverviewInstance.chartOverviewColorScale = d3.scaleOrdinal(colorScheme)\n        .domain(chartOverviewInstance.chartOverviewspecies);\n    \n    // drawLinePlotForOverview(chartOverviewInstance.chartOverviewspecies, chartOverviewColorScale); \n    \n});\n\nfunction drawLinePlotForOverview() {\n\n    let lineInterpolate = d3.line()\n                .x(function(d) { return chartOverviewInstance.xScale(d.year); })\n                .y(function(d) { return chartOverviewInstance.yScale(d.qty); });\n\n    if(chartOverviewInstance.slideOneChart === '') {\n        return false;\n    }\n    chartOverviewInstance.slideOneChart.selectAll('.line-plot')\n        .data(d => [d.value])\n        .enter()\n        .append('path')\n        .attr('class', 'line-plot')\n        .attr('id', d=>d[0].species)\n        .attr(\"data-legend\",d=>d[0].species)\n        .attr('d', lineInterpolate)\n        .style('stroke', d => chartOverviewInstance.chartOverviewColorScale(d[0].species));\n\n    d3.selectAll('.line-plot').each((d, i) => {\n        if(d3.select('#' + chartOverviewInstance.chartOverviewspecies[i]).node() == null) {\n            return ;\n        }\n        let totalLength = d3.select('#' + chartOverviewInstance.chartOverviewspecies[i]).node().getTotalLength();\n        d3.select('#' + chartOverviewInstance.chartOverviewspecies[i]).attr(\"stroke-dasharray\", totalLength + \" \" + totalLength)\n            .attr(\"stroke-dashoffset\", totalLength)\n            .transition()\n            .duration(5000)\n            .delay(1000 * i)\n            .ease(d3.easeLinear)\n            .attr('stroke-dashoffset', 0);\n    });\n\n    let legendRectSize = 12;\n    let legendSpacing = 2;\n    // let legend = chartOverviewInstance.chartOverviewsvg.selectAll('.legend')\n    //     .data(chartOverviewInstance.chartOverviewspecies)\n    //     .enter()\n    //     .append('g')\n    //     .attr('class', 'legend')\n    //     .attr('transform', function (d, i) {\n    //         var height = legendRectSize + legendSpacing;\n    //         var offset = height * chartOverviewInstance.chartOverviewspecies.length / 2;\n    //         var horz = chartOverviewInstance.chartOverviewWidth + 2 * legendRectSize;\n    //         var vert = chartOverviewInstance.chartOverviewHeight - (i * chartOverviewInstance.chartOverviewPadding.top + legendRectSize);\n    //         return 'translate(' + horz + ',' + vert + ')';\n    //     });\n    //\n    // legend.append('rect')\n    //     .attr('width', legendRectSize)\n    //     .attr('height', legendRectSize)\n    //     .style('fill', chartOverviewInstance.chartOverviewColorScale)\n    //     .style('stroke', chartOverviewInstance.chartOverviewColorScale);\n    // legend.append('text')\n    //     .attr('x', legendRectSize + legendSpacing)\n    //     .attr('y', legendRectSize - legendSpacing)\n    //     .text(function (d) { return d; })\n    //     .attr('font-size', '0.5rem');\n\n\n    return true;\n}\n\n\n\nexport {drawLinePlotForOverview}","\nclass mapChloropeth {\n    constructor() {\n        this.mapsvg = d3.select('#map').select('svg');\n        this.mapsvgWidth = +this.mapsvg.attr('width');\n        this.mapsvgHeight = +this.mapsvg.attr('height');\n        this.width = this.mapsvgWidth;\n        this.height = this.mapsvgHeight;\n        this.expressed ='mammals';\n        this.path = '';\n        this.projection = '';\n        this.dataMammals = '';\n        this.dataReptiles = '';\n        this.dataBirds = '';\n        this.dataAmphibians = '';\n        this.mammalsExtent = '';\n        this.BirdExtent = '';\n        this.ReptilesExtent = '';\n        this.AmphibiansExtent = '';\n        this.projection = d3.geoNaturalEarth().scale(this.width/2/Math.PI).translate([this.width/2, this.height/2])//translate([this.width/2, this.height/4])\n        this.path = d3.geoPath().projection(this.projection);\n        this.dataMammals = d3.map();\n        this.dataReptiles = d3.map();\n        this.dataBirds = d3.map();\n        this.dataAmphibians = d3.map();\n    }\n\n    setExpressed(expressed){\n        this.expressed = expressed;\n    }\n\n\n    mapColorScale(category){\n        var color;\n        if(category == 'mammals'){\n            color = d3.scaleSequential(d3.interpolateBlues)\n                .domain(this.mammalsExtent);\n    \n        }\n        if(category == 'birds') {\n            color = d3.scaleSequential(d3.interpolateBlues)\n                .domain(this.BirdExtent);\n        }\n    \n        if(category == 'reptiles') {\n            color = d3.scaleSequential(d3.interpolateBlues)\n                .domain(this.ReptilesExtent);\n        }\n    \n        if(category == 'amphibians') {\n            color = d3.scaleSequential(d3.interpolateBlues)\n                .domain(this.AmphibiansExtent);\n        }\n        return color;\n    }\n}\n        \n            \nvar mapOverViewInstance = new mapChloropeth();\n\nfunction createLegend(color, extentValue){\n    var colorNew = color.domain(extentValue);\n    var cb = d3.colorbarV(colorNew, 20, 375);\n    mapOverViewInstance.mapsvg.append(\"g\").attr(\"id\",\"legend\")\n    .attr(\"transform\", \"translate(\" + 60 + \",\" + 225 + \")\")\n    .call(cb);\n}\n\nfunction mouseOverEvent(d, i){\n    mapOverViewInstance.mapsvg.call(mapOverViewInstance.toolTip);\n    mapOverViewInstance.toolTip.show(d);\n    d3.select(this)\n}\n\nfunction mouseOutEvent(d,i){\n    mapOverViewInstance.toolTip.hide(d, this);\n            d3.select(this)\n                .style(\"stroke\", \"black\")\n                .style(\"stroke-width\", 1);\n        }\n\n\n\nfunction ready(topo, error) {\n    var toolTip = d3.tip()\n        .attr('class', 'd3-tip')\n        .offset([0, 0])\n        .direction('s')\n        .html(function (d) {\n            var Name = d[\"properties\"].name; \n            var mammals = d.mammals;\n            var birds = d.birds;\n            var amphibians = d.amphibians;\n            var reptiles = d.reptiles;\n            if(mapOverViewInstance.expressed == 'mammals')\n            {\n                return  Name +\n                \"</br> \" + mammals;\n            }\n            if(mapOverViewInstance.expressed == 'reptiles')\n            {\n                return Name +\n                    \"</br>\" + reptiles;\n            }\n            if(mapOverViewInstance.expressed == 'birds')\n            {\n                return Name +\n                    \"</br> \" + birds;\n            }\n            if(mapOverViewInstance.expressed == 'amphibians')\n            {\n                return  Name +\n                    \"</br>: \" + amphibians ;\n            }\n        });\n    if (error) throw error;\n    var recolorMap = mapOverViewInstance.mapColorScale( 'mammals');\n    createLegend(recolorMap, mapOverViewInstance.mammalsExtent);\n    var countries = mapOverViewInstance.mapsvg.append(\"g\")\n        .attr(\"class\", \"countries\")\n        .selectAll(\"path\")\n        .data(topo.features)\n        .enter().append(\"path\")\n        .attr(\"fill\", function (d){\n            d.mammals = mapOverViewInstance.dataMammals.get(d.id) || 0;\n            d.reptiles = mapOverViewInstance.dataReptiles.get(d.id) || 0;\n            d.birds = mapOverViewInstance.dataBirds.get(d.id) || 0;\n            d.amphibians = mapOverViewInstance.dataAmphibians.get(d.id) || 0;\n            return choropleth(d, recolorMap);\n        })\n        .attr(\"d\",  mapOverViewInstance.path)\n        .on('mouseover',function(d){\n            // console.log(\"using this\");\n            // mapOverViewInstance.mapsvg.call(toolTip);\n            // toolTip.show(d);\n            d3.select(this)\n            mousehoverEvent1(d);\n          })\n          .on('mouseout', function(d){\n            // toolTip.hide(d);\n            d3.select(this)\n            .style(\"stroke\", \"black\")\n            .style(\"stroke-width\", 1);\n            mousehoverEvent1();\n          });\n    d3.select(\"select\")\n        .on(\"change\", function(){\n            changeAttribute(this.value, topo);\n\n        });\n\n}\n\n\nfunction mousehoverEvent1(d) {\n    var info = \"\";\n\n    if (d) {\n        var Name = d[\"properties\"].name;\n        var mammals = d.mammals;\n        var birds = d.birds;\n        var amphibians = d.amphibians;\n        var reptiles = d.reptiles;\n        // console.log(mapOverViewInstance.expressed);\n\n        if(mapOverViewInstance.expressed == 'mammals')\n        {\n            info =  Name + \" : \" + mammals;\n        }\n        if(mapOverViewInstance.expressed == 'reptiles')\n        {\n            info =  Name + \" : \" + reptiles;\n        }\n        if(mapOverViewInstance.expressed == 'birds')\n        {\n            info =  Name + \" : \" + birds;\n        }\n        if(mapOverViewInstance.expressed == 'amphibians')\n        {\n            info =   Name + \" : \" + amphibians ;\n        }\n    }\n\n    // var hover_text = forest.forestSvg\n\n    var hover_text = mapOverViewInstance.mapsvg\n        .selectAll(\".m1\")\n        .data([1]);\n\n    hover_text.exit().remove();\n\n    var hover_text_new = hover_text.enter()\n        .append(\"text\")\n        .attr(\"class\", \"m1\");\n\n    hover_text.merge(hover_text_new)\n        .transition()\n        .duration(300)\n        .attr(\"x\", (500))\n        .attr(\"y\", (550))\n        .attr(\"z-index\", \"-1\")\n        .attr(\"text-anchor\", \"middle\")\n        .style(\"font-size\", \"30px\")\n        .text(function (d) {\n            return info;\n        });\n}\n\n\n\nfunction choropleth(d, recolorMap){\n    //get data value\n    var value = d[mapOverViewInstance.expressed];\n    //if value exis ts, assign it a color; otherwise assign gray\n    if (value!=0) {\n        return recolorMap(value);\n    } else {\n        return \"#dddddd\";\n    };\n};\n\nfunction changeAttribute(attribute, topo){\n    mapOverViewInstance.expressed = attribute;\n    d3.selectAll(\".countries\").selectAll(\"path\").data(topo.features) //select every region\n        .attr(\"fill\", function(d) {\n            var c = mapOverViewInstance.mapColorScale(mapOverViewInstance.expressed);\n            if(mapOverViewInstance.expressed == 'mammals'){\n        domain = mapOverViewInstance.mammalsExtent;\n    }\n    if(mapOverViewInstance.expressed == 'birds') {\n        domain = mapOverViewInstance.BirdExtent;\n    }\n\n    if(mapOverViewInstance.expressed == 'reptiles') {\n        domain = mapOverViewInstance.ReptilesExtent;\n    }\n\n    if(mapOverViewInstance.expressed == 'amphibians') {\n        domain = mapOverViewInstance.AmphibiansExtent;\n    }    mapOverViewInstance.mapsvg.selectAll(\"#legend\").remove()\n         createLegend(c,domain)//color enumeration units\n            return choropleth(d, c); //->\n\n        });\n}\n\n\nmapOverViewInstance.promises = [d3.json(\"https://enjalot.github.io/wwsd/data/world/world-110m.geojson\"),\n d3.csv('./data-csv/data-map.csv')];\n\nPromise.all(mapOverViewInstance.promises).then(function(data) { \n    topo = data[0]\n    data = data[1]\n\n    data.forEach(d => {\n        mapOverViewInstance.dataMammals.set(d.code, +d.Mammals);\n        mapOverViewInstance.dataReptiles.set(d.code, +d.Reptiles);\n        mapOverViewInstance.dataAmphibians.set(d.code, +d.Amphibians);\n        mapOverViewInstance.dataBirds.set(d.code, +d.Birds);\n        mapOverViewInstance.mammalsExtent = d3.extent(d3.values(mapOverViewInstance.dataMammals, function(data){\n            return d.Mammals;\n        }));\n        mapOverViewInstance.BirdExtent = d3.extent(d3.values(mapOverViewInstance.dataBirds, function(data){\n            return d.Birds;\n        }));\n        mapOverViewInstance.ReptilesExtent = d3.extent(d3.values(mapOverViewInstance.dataReptiles, function(data){\n            return d.Reptiles;\n        }));\n        mapOverViewInstance.AmphibiansExtent = d3.extent(d3.values(mapOverViewInstance.dataAmphibians, function(data){\n            return d.Amphibians;\n        }));\n    });\n    ready(topo);\n\n})\n      ","d3.csv(\"./data-csv/extinctbubble.csv\").then ( function(data,error) {\n\n    var width = 1000,\n    height = 750,\n    padding = 1.5, // separation between same-color nodes\n    clusterPadding = 6, // separation between different-color nodes\n    maxRadius = 12;\n\n\n    var categories = Array.from(new Set(data.map(d => d.category)))\n\nconst n = data.length, // total number of nodes\n    m = categories.length; // number of distinct clusters\n\n// const color = d3.scaleSequential(d3.inter)\n//     .domain(d3.range(m));\n\n\n\n\n\nlet colorarray=['#a9a9a9', '#f3bb09','#771e1e','#129812','#0c0cca']\nvar color = d3.scaleOrdinal(colorarray);\n\n// The largest node for each cluster.\nconst clusters = new Array(m);\n\nconst getNodes = () => {\n  \n  const dist = 100;\t\n  \n  return data.map(function(elem) {\n    let i = categories.findIndex(c => c == elem.category) || '',\n        r = +elem.size,\n        d = {\n          cluster: i,\n          radius: r*1.2,\n          x: Math.cos(i / m * 2 * Math.PI) * 200 + width / 2 + Math.random(),\n          y: Math.sin(i / m * 2 * Math.PI) * 200 + height / 2 + Math.random()\n        };\n    if (!clusters[i] || (r > clusters[i].radius)) clusters[i] = d;\n    return d;\n  });\n}  \n\nlet nodes = getNodes();\n   \nconst svg = d3.select('#extinct-bubble-chart').select('svg')\n    .attr(\"width\", width)\n    .attr(\"height\", height);\n\n\n    var toolTip = d3.tip()\n                    .attr('class', 'd3-tip-extinct')\n                    .offset([0, 0])\n                    .direction('s')\n                    \n                    // .html(data.forEach(function(d) {\n                    //     console.log(data)\n                    //     var Scientificname = d.sciname;\n                    //     console.log(Scientificname)\n                        \n                    //         return  \"<p>\"+d.sciname+\n                    //         \"</p></br> \" \n                    .html(function(d, i) {\n                                console.log(d)\n                                console.log(d.index)\n                                x=data[d.index].sciname\n                                y=data[d.index].commonname\n                                return \"<p>Scientificname : <i>\" + data[d.index].sciname + \"</i></br> \" +\n                               \"Common name : \" + data[d.index].commonname + \"</br> \" +\n                                \"Year Of Assessment : \" + data[d.index].year1 + \"</br> \" +\n                                \"Last Recorded in the Wild : \" + data[d.index].year2 + \"</br> \"\n    \n                                \n                                \n                     });\n                     function mouseOverEvent(d, i){\n                        //createSparkLine(d,i);\n                         svg.call(toolTip);\n                         toolTip.show(d, this);\n                         d3.select(this)\n                         .style(\"stroke\", \"black\")\n                                     .style(\"stroke-width\",3);\n             //                         \n                     }\n             \n                     function mouseOutEvent(d,i){\n                                 toolTip.hide(d, this);\n                                 d3.select(this)\n                                     .style(\"stroke\", \"black\")\n                                     .style(\"stroke-width\",0);\n                               \n                             }\n                        //      var node = svg.selectAll(\"circle\")\n                        //      .data(nodes)\n                        //      .enter().append(\"g\");//.call(force.drag);\n                         \n                         \n                        //  node.append(\"circle\")\n                        //      .style(\"fill\", function (d) {\n                        //      return color(d.cluster);\n                        //      })\n                        //      .attr(\"r\", function(d){return d.radius})\n                        //      .on(\"mousemove\", mouseOverEvent)\n                        //                  .on(\"mouseout\", mouseOutEvent);                            \n\n// Move d to be adjacent to the cluster node.\n// from: https://bl.ocks.org/mbostock/7881887\nconst cluster = () => {\n\n  var nodes,\n    strength = 0.1;\n\n  function force (alpha) {\n\n    // scale + curve alpha value\n    alpha *= strength * alpha;\n\n    nodes.forEach(function(d) {\n\t\t\tvar cluster = clusters[d.cluster];\n    \tif (cluster === d) return;\n      \n      let x = d.x - cluster.x,\n        y = d.y - cluster.y,\n        l = Math.sqrt(x * x + y * y),\n        r = d.radius + cluster.radius;\n\n      if (l != r) {\n        l = (l - r) / l * alpha;\n        d.x -= x *= l;\n        d.y -= y *= l;\n        cluster.x += x;\n        cluster.y += y;\n      }\n    });\n\n  }\n\n  force.initialize = function (_) {\n    nodes = _;\n  }\n\n  force.strength = _ => {\n    strength = _ == null ? strength : _;\n    return force;\n  };\n\n  return force;\n\n}\n\nconst removeAll = () => {\n  const node = svg.selectAll(\"circle\").remove();\n}\n  \nfunction drawNodes(targetCenter) {\n    \n  const node = svg.selectAll(\"circle\")\n    .data(nodes)\n  .enter().append(\"circle\")\n    .style(\"fill\", function(d) { return color(d.cluster/10); })    \n    .on(\"mousemove\", mouseOverEvent)\n    .on(\"mouseout\", mouseOutEvent); \n  \n  const layoutTick = e => {\n  \tnode\n      .attr(\"cx\", function(d) { return d.x; })\n      .attr(\"cy\", function(d) { return d.y; })\n      .attr(\"r\", function(d) { return d.radius; });\n\t}\n  \n  const force = d3.forceSimulation()\n  // keep entire simulation balanced around screen center\n  .force('center', d3.forceCenter(targetCenter.x, targetCenter.y))\n\n  // cluster by section\n  .force('cluster', cluster()\n    .strength(0.2))\n\n  // apply collision with padding\n  .force('collide', d3.forceCollide(d => d.radius + padding)\n    .strength(0.7))\n\n  .on('tick', layoutTick)\n\t.nodes(nodes);\n}\n\n  \nconst targets = [ {x: 350, y: 300}];\t\n  \nconst drawTargets = () => {\n  \n  svg.selectAll(\"rect\")\n    .data(targets)\n  .enter().append(\"rect\")\n  \t.attr(\"width\", 5)\n  \t.attr(\"height\", 5)\n  \t.attr(\"x\", function(d) { return d.x; })\n    .attr(\"y\", function(d) { return d.y; })\n    .style(\"fill\", \"red\");\n} \n  \nconst draw = () => {\n  drawTargets();\n  let count = 0;\n  \n  drawNodes(targets[count]);\n//   const moveTarget = () => {\n//     removeAll();\n//     nodes = getNodes();\n//     drawNodes(targets[count]);\n\n//     count++;\n//     if (count >=1) count = 0;\n//     //\n    \n//   }\n//   setInterval(moveTarget, 1500)\n}\n\ndraw();\n\n\n});","/*\n * File: disintegrateAnimal.js\n * Project: scrolltelling\n * File Created: November 2019\n * Author: Shalini Chaudhuri (you@you.you)\n */\n\n /**\n  * Demo from \"https://github.com/ZachSaucier/Disintegrate/blob/gh-pages/disintegrate-self-contained.html\"\n  * @param {*} elem \n  */\n function disintegrateElement(elem) {\n    \n    if(document.querySelector('[data-dis-type=\"self-contained\"]')) {\n        // If you do anything with dises, you need to wait for them to \n        // all finish loading\n        window.addEventListener(\"disesLoaded\", function() {\n          let el = document.querySelector('[data-dis-type=\"self-contained\"]');\n          let dises = [disintegrate.getDisObj(el)]; // hack\n          dises.forEach(function(disObj) {\n            if(disObj.elem.dataset.disType === \"self-contained\") {\n            //   disObj.container.addEventListener(\"click\", function(e) {\n            //     disObj.container.classList.add(\"animate\");\n            //   });\n            // need it to run as soon as vis opens up\n                setTimeout(()=> {disObj.container.classList.add(\"animate\");}, 1);\n\n            //   disObj.elem.addEventListener(\"disComplete\", function(e) {\n            //     disObj.container.classList.remove(\"animate\");\n            //     // Hack to reset the CSS animations\n            //     // see https://stackoverflow.com/a/6303311/2065702 for more info\n            //     disObj.elem.remove();\n\n            //     // reveal the underlying text\n\n            //     // $(elem).show(); // happens too late\n            //   });\n              function resetCSSAnimation(el) {\n                el.style.animation = \"none\";\n                setTimeout(function() {\n                    el.style.animation = \"\";\n                }, 10);\n              }\n            }\n          });\n          var ExplodeToRightParticle = function() {\n            this.name = \"ExplodeToRightParticle\";\n            this.animationDuration = 500; // in ms\n            this.speed = {\n              x: 0 + Math.random() * 6,\n              y: -1.5 + Math.random() * 3\n            };\n            this.radius = 0 + Math.random() * 5;\n            this.life = 30 + Math.random() * 10;\n            this.remainingLife = this.life;\n            this.firstRun = true;\n            this.draw = ctx => {\n              if(this.firstRun) {\n                this.firstRun = false;\n                this.startX += Math.random() * 20;\n              }\n              if(this.remainingLife > 0\n              && this.radius > 0) {\n                ctx.beginPath();\n                ctx.arc(this.startX, this.startY, this.radius, 0, Math.PI * 2);\n                ctx.fillStyle = \"rgba(\" + this.rgbArray[0] + ',' + this.rgbArray[1] + ',' + this.rgbArray[2] + \", 1)\";\n                ctx.fill();\n                this.remainingLife--;\n                this.radius -= 0.1;\n                this.startX += this.speed.x;\n                this.startY += this.speed.y;\n              }\n            }\n          }\n          disintegrate.addParticleType(ExplodeToRightParticle);\n          function genNormalizedVal() {\n            return ((Math.random() + Math.random() + Math.random() + Math.random() + Math.random() + Math.random() - 3)) / 3;\n          }\n          const EaseIn    = power => t => Math.pow(t, power),\n                EaseOut   = power => t => 1 - Math.abs(Math.pow(t-1, power)),\n                EaseInOut = power => t => t<.5 ? EaseIn(power)(t*2)/2 : EaseOut(power)(t*2 - 1)/2+0.5;\n          var HollowCircles = function() {\n            this.name = \"HollowCircles\";\n            this.animationDuration = 1000; // in ms\n            this.widthScaler = Math.round(50 * genNormalizedVal()); // Normalized val between -50 and 50\n            this.numWaves = (genNormalizedVal() + 1 / 2) * 2 + 1;\n            this.xPosFunc = t => { return Math.sin(this.numWaves * Math.PI * t); }; \n            this.heightScaler = Math.round(65 * (genNormalizedVal() + 1) / 2) + 10; // Normalized val between 10 and 75\n            this.yPosFunc = t => { return t; }; \n            \n            this.startRadius = 5 + Math.random() * 7;\n            this.sizeFunc = t => { return 1 - t; };\n            this.opacityFactor = Math.round(((genNormalizedVal() + 1) / 2) * 3 + 1);\n            this.opacityFunc = t => { return 1 - EaseInOut(this.opacityFactor)(t); };\n            \n            this.firstRun = true;\n            this.draw = (ctx, percent) => {\n              percent = percent >= 1 ? 1 : percent;\n              if(this.firstRun) {\n                this.firstRun = false;\n                this.startY += Math.random() * 20;\n              }\n              let currX = this.startX + this.xPosFunc(percent) * this.widthScaler;\n              let currY = this.startY - this.yPosFunc(percent) * this.heightScaler;\n              let radius = this.startRadius * this.sizeFunc(percent);\n              let currOpacity = this.opacityFunc(percent);\n              ctx.beginPath();\n              ctx.strokeStyle = \"rgba(\" + this.rgbArray[0] + ',' + this.rgbArray[1] + ',' + this.rgbArray[2] + ',' + currOpacity + \")\";\n              ctx.arc(currX, currY, radius, 0, Math.PI * 2);\n              ctx.stroke();\n            };\n          };\n          disintegrate.addParticleType(HollowCircles);\n        });\n      }\n      \n\n }\n\n\n export {disintegrateElement}","class ForestCover {\n    constructor() {\n        this.forestMargin = {top: 50, right: 150, bottom: 50, left: 70}\n        this.forestWidth = 1100 - this.forestMargin.left - this.forestMargin.right;\n        this.forestHeight = 700 - this.forestMargin.top - this.forestMargin.bottom;\n        this.forestSvg = d3.select(\"#forestcoverplot\")\n            .append(\"svg\")\n            .attr(\"width\", this.forestWidth + this.forestMargin.left + this.forestMargin.right)\n            .attr(\"height\", this.forestHeight + this.forestMargin.top + this.forestMargin.bottom)\n            .append(\"g\")\n            .attr(\"transform\", \"translate(\" + this.forestMargin.left + \",\" + this.forestMargin.top + \")\");\n        this.forestDots = this.forestSvg.append('g');\n        this.forestDataTime = d3.range(0, 27).map(function (d) {\n            return new Date(1990 + d, 10, 3);\n        });\n\n        this.selectedYear = 2000;\n    }\n\n    setDataset(dataset) {\n        this.dataset = dataset;\n    }\n\n    setScale(xScale, yScale, rScale) {\n        this.xScale = xScale;\n        this.yScale = yScale;\n        this.rScale = rScale;\n    }\n\n    setSelectedYear(year) {\n        this.selectedYear = year;\n    }\n}\n\n\nvar forest = new ForestCover();\n\nvar toolTip = d3.tip()\n    .attr(\"class\", \"d3-tip\")\n    .offset([-12, 0])\n    .html(function (d) {\n        return \"<h4 align='center'>\" + d['Country'] + \"</h4><h3  align='center'>\"\n            + parseFloat(d['Area']) + \"k sq km</h3></b>\"\n        // return \"<h4 align='center'>\" + d['Country'] + \"</h4><h2  align='center'>\"\n        //     + parseFloat(d[forest.selectedYear]).toFixed(2) + \"%</h2></b>\"\n    });\nforest.forestSvg.call(toolTip);\n\n\n// d3.csv('forestcover1990-2016.csv').then((dataset) => {\nd3.csv('./data-csv/forestcover1990-2016-2.csv').then((dataset) => {\n\n    forest.setDataset(dataset);\n\n    // Add X axis\n    var x = d3.scaleLinear()\n        .domain([0, 202])\n        .range([0, forest.forestWidth]);\n\n    var y = d3.scaleLinear()\n        .domain([0, 100])\n        .range([forest.forestHeight, 0]);\n\n\n    var rscale = d3.scaleSqrt()\n        .range([1, 30]);\n\n    rscale.domain(d3.extent(forest.dataset, function (d) {\n        return d[\"Area\"];\n    }));\n\n    forest.setScale(x, y, rscale);\n\n    forest.forestSvg.append(\"g\")\n        .attr(\"transform\", \"translate(0,\" + (forest.forestHeight) + \")\")\n        .call(d3.axisBottom(forest.xScale).tickSize(0).tickValues([]));\n\n    forest.forestSvg.append(\"g\")\n        .attr(\"transform\", \"translate(00, 0)\")\n        .style(\"font-size\", 15)\n        .call(d3.axisLeft(forest.yScale).ticks(5));\n\n    // buildGraph();\n\n});\n\nfunction buildGraph() {\n\n    if (forest.selectedYear > 2016) {\n        return;\n    }\n\n    var year = forest.forestSvg\n        .selectAll(\".year\")\n        .data([1]);\n\n    year.exit().remove();\n\n    var newYear = year.enter()\n        .append(\"text\")\n        .attr(\"class\", \"year\");\n\n    year.merge(newYear)\n        .transition()\n        .duration(200)\n\n        .attr(\"x\", (forest.forestWidth / 2))\n        .attr(\"y\", (30))\n        .attr(\"z-index\", \"-1\")\n        .attr(\"text-anchor\", \"middle\")\n        .style(\"font-size\", \"80px\")\n        .style(\"opacity\", \"0.5\")\n        .text(function (d) {\n            return forest.selectedYear;\n        });\n\n    var circles = forest.forestDots\n        .selectAll(\"circle\")\n        .data(forest.dataset);\n\n    circles.exit()\n        .remove();\n\n    var newCircles = circles.enter()\n        .append('circle');\n\n    circles.merge(newCircles)\n        .transition()\n        .duration(400)\n        .attr(\"cx\", function (d, i) {\n            return forest.xScale(i);\n        })\n        .attr(\"cy\", function (d) {\n            return forest.yScale(d[forest.selectedYear]);\n        })\n        .attr(\"r\", function (d) {\n            return forest.rScale(d.Area)\n        })\n        .style(\"fill\", function (d) {\n            if (d[forest.selectedYear] < 33) {\n                return \"#c00400\";\n            }\n            return \"#129812\";\n        })\n        .style(\"opacity\", 0.6);\n\n    newCircles\n        .on(\"mouseover\", function (d) {\n            mousehoverEvent(d)\n        })\n        .on(\"mouseout\", function (d) {\n            mousehoverEvent()\n        });\n\n    forest.forestSvg.call(toolTip);\n\n    if (forest.selectedYear <= 2015) {\n        setTimeout(function () {\n            var year = forest.selectedYear + 1;\n            forest.setSelectedYear(year);\n            buildGraph()\n        }, 500);\n    }\n\n\n};\n\n\n\nfunction mousehoverEvent(d) {\n    var info = \"\";\n\n    if (d) {\n        info = d['Country'] + \" : \" + parseFloat(d['Area']) + \"k sq km\";\n    }\n\n    var hover_text = forest.forestSvg\n        .selectAll(\".year1\")\n        .data([1]);\n\n    hover_text.exit().remove();\n\n    var hover_text_new = hover_text.enter()\n        .append(\"text\")\n        .attr(\"class\", \"year1\");\n\n    hover_text.merge(hover_text_new)\n        .transition()\n        .duration(200)\n\n        .attr(\"x\", (200))\n        .attr(\"y\", (10))\n        .attr(\"z-index\", \"-1\")\n        .attr(\"text-anchor\", \"middle\")\n        .style(\"font-size\", \"20px\")\n        .style(\"opacity\", \"0.5\")\n        .text(function (d) {\n            return info;\n        });\n}\n\nexport {buildGraph}","/*\n * File: industrializationplot.js\n * Project: industrializationplot\n * File Created: November 2019\n * Author: Shalini Chaudhuri (you@you.you)\n */\n\nclass IndustrializationPlot {\n    constructor() {\n        this.industrializationsvg = d3.select('#industrialization').select('svg');\n        this.industrializationsvgWidth = +this.industrializationsvg.attr('width');\n        this.industrializationsvgHeight = +this.industrializationsvg.attr('height');\n        this.industrializationPadding = {top: 20, right: 20, bottom: 60, left: 60};\n        this.industrializationwHeight = this.industrializationsvgHeight - this.industrializationPadding.top - this.industrializationPadding.bottom;\n        this.industrializationWidth = this.industrializationsvgWidth- 2*this.industrializationPadding.right - 1.5*this.industrializationPadding.left;\n        this.industrializationChartTyep = 'line';\n    }    \n\n    setDataset(dataset) {\n        this.dataset = dataset;\n    }\n\n    setIndicators(indicators) {\n        this.indicators = indicators;\n    }\n\n    setCountries(countries) {\n        this.countries = countries;\n    }\n\n    setScale(xScale, yScale, xCountryScale) {\n        this.xScale = xScale;\n        this.yScale = yScale;\n        this.xCountryScale = xCountryScale;\n    }\n\n    setIndicatorCountryWiseInformation(indicatorCountryWiseInformation) {\n        this.indicatorCountryWiseInformation = indicatorCountryWiseInformation;\n    }\n\n    setIndicatorYearWiseInformation(indicatorYearWiseInformation) {\n        this.indicatorYearWiseInformation = indicatorYearWiseInformation;\n    }\n}\n\n\nvar industrializationPlotInstance = new IndustrializationPlot(); // init once and then keep reusing\n\nd3.csv('./data-csv/industrializationdata.csv').then((dataset) => {\n    \n    let headerNames = d3.keys(dataset[0]);\n    let uniqueIndicators = dataset\n\n    industrializationPlotInstance.setDataset(dataset);\n    \n    let indicatorsId = Array.from(new Set(dataset.map(d=>d['Indicator Id'])));\n    let indicators = Array.from(new Set(dataset.map(d=>d['Indicator'])));\n    let indicatorsInfo = indicatorsId.map((element, index) => {\n        return {\n            id: element,\n            name: indicators[index]\n        }\n    });\n\n\n    // add select options\n    createOptionsForSelection(indicatorsInfo);\n\n    let countryId = Array.from(new Set(dataset.map(d=>d['Country ISO3'])));\n    let countries = Array.from(new Set(dataset.map(d=>d['Country Name'])));\n    let countriesInfo = countryId.map((element, index) => {\n        return {\n            id: element,\n            code: countries[index]\n        }\n    });\n\n    countriesInfo.push({\n        id: 180,\n        code: 'World Median',\n    });\n    createOptionsForCountry(countriesInfo);\n\n    industrializationPlotInstance.setIndicators(indicatorsInfo);\n    industrializationPlotInstance.setCountries(countriesInfo);\n\n    // nest by indicator and then year\n    /**\n     * {indicatorID: [{\n     *      year:\n     *      details:[{\n     *          country: ,\n     *          code: ,\n     *          value: 0.66\n     *       }]\n     * }]}\n     */\n    indicatorYearWiseInformation = {};\n    industrializationPlotInstance.indicators.forEach(indicator => {\n        indicatorYearWiseInformation[indicator.id] = [];\n        const filteredIndicator = dataset.filter(d => d['Indicator Id'] === indicator.id);\n        indicatorYearWiseInformation[indicator.id] = getYearWiseInformation(filteredIndicator);\n    });\n\n    industrializationPlotInstance.setIndicatorYearWiseInformation(indicatorYearWiseInformation);\n\n  \n    // nest by indicator and then country\n    /**\n     * {indicatorID: [{\n     *      country:\n     *      code:\n     *      values: [{\n     *          year: 1990,\n     *          value: 0.66\n     *       }]\n     * }]}\n     */\n    indicatorCountryWiseInformation = {};\n    industrializationPlotInstance.indicators.forEach(indicator => {\n        indicatorCountryWiseInformation[indicator.id] = [];\n        const filteredIndicator = dataset.filter(d => d['Indicator Id'] === indicator.id);\n        filteredIndicator.forEach(c => {\n            let arr = getYearInformation(c);\n            let obj = {};\n            obj['country'] = c['Country Name'];\n            obj['key'] = c['Country ISO3'];\n            obj['code'] = c['Country ISO3'];\n            obj['values'] = arr;\n\n            indicatorCountryWiseInformation[indicator.id].push(obj);\n        });\n        let obj = {};\n        obj['country'] = 'World Median';\n        obj['key'] = 180;\n        obj['code'] = 180;\n        obj['values'] = getMedian(indicatorYearWiseInformation[indicator.id]); // year wise median needed\n        indicatorCountryWiseInformation[indicator.id].push(obj);\n    });\n\n    industrializationPlotInstance.setIndicatorCountryWiseInformation(indicatorCountryWiseInformation);\n\n\n\n    // bubble plot\n    // line plot\n    let statistics = [];\n    let paramId = 3786\n    industrializationPlotInstance.prevParam = 3786;\n    if(industrializationPlotInstance.industrializationChartTyep == 'line') {\n        statistics = indicatorCountryWiseInformation[paramId];  \n        drawLineChart(statistics, paramId);\n    } else {\n        let yearId = 2003;\n        statistics = indicatorYearWiseInformation[paramId];  \n        drawBubblePlot(statistics, paramId, yearId);\n    }\n    \n});\n\nfunction drawLineChart(statistics, paramId) {\n\n    industrializationPlotInstance.industrializationsvg.selectAll('.axis').remove();\n    industrializationPlotInstance.industrializationsvg.selectAll('.chart').remove();\n\n\n    let dateExtent = d3.extent(indicatorYearWiseInformation[3786].map(d => +d['year']));\n\n    let countryExtent = [0, 145];\n\n    let valueAmount = []\n    statistics.forEach(d => {\n            // add the species population to list\n            // valueAmount = valueAmount.concat(d['details'].map(x => +x.value));\n            valueAmount = valueAmount.concat(d['values'].map(x => +x.value));\n    });\n\n    let valueExtent = d3.extent(valueAmount);\n\n    let xScale =  d3.scaleLinear()\n                    .domain(dateExtent)\n                    .range([0, industrializationPlotInstance.industrializationWidth]);\n    let xCountryScale =  d3.scaleLinear()\n                    .domain(countryExtent)\n                    .range([0, industrializationPlotInstance.industrializationWidth]);\n    let yScale = d3.scaleLinear()\n                    .domain(valueExtent)\n                    .range([industrializationPlotInstance.industrializationwHeight, 0]);\n    \n    industrializationPlotInstance.setScale(xScale, yScale, xCountryScale);    \n\n    // industrializationPlotInstance.slideChart = industrializationPlotInstance.industrializationsvg.selectAll('.chart')\n    // .data(industrializationPlotInstance.indicatorCountryWiseInformation[industrializationPlotInstance.prevParam])\n    // .exit()\n    // .remove();\n\n    industrializationPlotInstance.slideChart = industrializationPlotInstance.industrializationsvg.selectAll('.chart')\n        .data(statistics)\n        .enter()\n        .append('g')\n        .attr('class', 'chart')\n        .attr('transform', function(d,i) {\n            var tx =  industrializationPlotInstance.industrializationPadding.right + industrializationPlotInstance.industrializationPadding.left;\n            var ty =  industrializationPlotInstance.industrializationPadding.top;\n            return 'translate('+[tx, ty]+')';\n        });\n\n    industrializationPlotInstance.slideChart.exit().remove();\n\n    industrializationPlotInstance.prevParam = paramId;\n    \n    var xAxis = d3.axisBottom(industrializationPlotInstance.xScale).tickFormat(d3.format(\"d\"));\n    \n    industrializationPlotInstance.slideChart.append('g')\n        .attr('class', 'x axis')\n        .attr('transform', 'translate(0,'+industrializationPlotInstance.industrializationwHeight+')')\n        .call(xAxis);\n\n    var yAxis = d3.axisLeft(industrializationPlotInstance.yScale);\n    industrializationPlotInstance.slideChart.append('g')\n        .attr('class', 'y axis')\n        .attr('transform', 'translate(0,0)')\n        .call(yAxis);\n    \n\n    industrializationPlotInstance.slideChart.append('text')\n        .attr('class', 'x axis-label')\n        .attr('transform', 'translate('+[industrializationPlotInstance.industrializationWidth / 2, industrializationPlotInstance.industrializationwHeight + 34]+')')\n        .text('Year');\n\n    industrializationPlotInstance.slideChart.append('text')\n        .attr('class', 'y axis-label')\n        .attr('transform', 'translate('+[-50, industrializationPlotInstance.industrializationwHeight - 50  + industrializationPlotInstance.industrializationPadding.bottom]+') rotate(270)')\n        .text(industrializationPlotInstance.indicators.find(d => +d.id === +paramId).name);\n\n\n\n    drawLinePlotForOverview(paramId); \n}\n\n\n\nfunction drawBubblePlot(statistics, paramId, yearId) {\n\n    let dataTime = d3.range(0, 25).map(function (d) {\n        return new Date(1990 + d, 10, 3);\n    });\n    \n    let sliderTime = d3.sliderBottom()\n        .min(d3.min(dataTime))\n        .max(d3.max(dataTime))\n        .step(1000 * 60 * 60 * 24 * 365)\n        .width(500)\n        .ticks(5)\n        .tickFormat(d3.timeFormat('%y'))\n        .tickValues(dataTime)\n        .default(new Date(2003, 10, 3))\n        .on('onchange', val => {\n            d3.select('p#value-time').text(d3.timeFormat('%Y')(val));\n            let selected_year = d3.timeFormat('%Y')(val);\n            console.log(\"changed year\");\n            let countryCodes = $('#countryParameter').val();\n            buildBubblePlot(statistics, paramId, selected_year, countryCodes);\n        });\n\n    \n\n    if($('#slider-time').find('svg').length == 0) {\n        let gTime = d3\n            .select('div#slider-time')\n            .append('svg')\n            .attr('width', industrializationPlotInstance.industrializationWidth - 100)\n            .attr('height', 100)\n            .append('g')\n            .attr('transform', 'translate(15,30)');\n        gTime.call(sliderTime);\n    }\n    \n    console.log(\"initial year\");\n    let countryCodes = $('#countryParameter').val();\n    buildBubblePlot(statistics, paramId, yearId, countryCodes);\n}\n\nfunction countryIndex(code) {\n    return industrializationPlotInstance.countries.findIndex(d => d.id === code);\n}\n\nfunction buildBubblePlot(statistics, paramId, yearId, countryCodes) {\n\n    if(countryCodes && countryCodes.length !== 0) {\n        let stats = [];\n        statistics.forEach(s => {\n            let obj = {};\n            obj.year = s.year;\n            obj.details = s['details'].filter(c => countryCodes.findIndex(v => v === c.code || c.code == 180) > -1);\n            stats.push(obj);\n        });\n        statistics = stats;\n    }\n\n    industrializationPlotInstance.industrializationsvg.selectAll('.axis').remove();\n    industrializationPlotInstance.industrializationsvg.selectAll('.axis-label').remove();\n    industrializationPlotInstance.industrializationsvg.selectAll('.chart').remove();\n\n   \n    let countryExtent = [0, 145];\n    let xCountryScale =  d3.scaleLinear()\n        .domain(countryExtent)\n        .range([0, industrializationPlotInstance.industrializationWidth]);\n\n    let valueAmount = [];\n    statistics = statistics.filter(s => +s.year === +yearId)[0]['details'];\n    statistics.forEach(d => {\n            // add the species population to list\n            // valueAmount = valueAmount.concat(d['details'].map(x => +x.value));\n            valueAmount = valueAmount.concat(+d['value']);\n    });\n\n    let valueExtent = d3.extent(valueAmount);\n\n    let xScale = d3.scaleLinear()\n                    .domain(countryExtent)\n                    .range([0, industrializationPlotInstance.industrializationWidth]);\n    let yScale = d3.scaleLinear()\n                    .domain(valueExtent)\n                    .range([industrializationPlotInstance.industrializationwHeight, 0]);\n\n    let rscale = d3.scaleSqrt().range([1, 6])\n    rscale.domain(valueAmount);\n    \n\n    industrializationPlotInstance.setScale(xScale, yScale, xCountryScale);\n    industrializationPlotInstance.slideChart = industrializationPlotInstance.industrializationsvg.selectAll('.chart')\n        .data(statistics)\n        .enter()\n        .append('g')\n        .attr('class', 'chart')\n        .attr('transform', function (d, i) {\n            var tx = industrializationPlotInstance.industrializationPadding.right + industrializationPlotInstance.industrializationPadding.left;\n            var ty = industrializationPlotInstance.industrializationPadding.top;\n            return 'translate(' + [tx, ty] + ')';\n        });\n\n    industrializationPlotInstance.slideChart.exit().remove();\n\n    industrializationPlotInstance.prevParam = paramId;\n\n    var xAxis = d3.axisBottom(industrializationPlotInstance.xScale);\n\n    industrializationPlotInstance.slideChart.append('g')\n        .attr('class', 'x axis')\n        .attr('transform', 'translate(0,' + industrializationPlotInstance.industrializationwHeight + ')')\n        .call(xAxis);\n    var yAxis = d3.axisLeft(industrializationPlotInstance.yScale);\n    industrializationPlotInstance.slideChart.append('g')\n        .attr('class', 'y axis')\n        .attr('transform', 'translate(0,0)')\n        .call(yAxis);\n    industrializationPlotInstance.slideChart.append('text')\n        .attr('class', 'x axis-label')\n        .attr('transform', 'translate(' + [industrializationPlotInstance.industrializationWidth / 2, industrializationPlotInstance.industrializationwHeight + 34] + ')')\n        .text('Countries');\n    industrializationPlotInstance.slideChart.append('text')\n        .attr('class', 'y axis-label')\n        .attr('transform', 'translate(' + [-50, industrializationPlotInstance.industrializationwHeight / 2 + industrializationPlotInstance.industrializationPadding.bottom] + ') rotate(270)')\n        .text(industrializationPlotInstance.indicators.find(d => +d.id === +paramId).name);\n\n\n    // if(chartOverviewInstance.slideOneChart === '') {\n    //     return false;\n    // }\n    industrializationPlotInstance.slideChartEnter = industrializationPlotInstance.slideChart.selectAll('circle')\n        .data(d => {\n            return [d];});\n\n    \n    let circleneter = industrializationPlotInstance.slideChartEnter.enter()\n        .append('circle');\n\n\n    let colorBrewer = d3.scaleSequential().domain([1,200])\n    .interpolator(d3.interpolateYlGnBu);\n    circleneter.attr('class', 'bubble')\n        .attr('id', d =>{ return `${paramId}-${d['code']}`;})\n        .transition()\n        .duration(600)\n        .attr(\"cx\", (d) => {\n            return xScale(countryIndex(d.code));\n        })\n        .attr(\"cy\", function (d) {\n            return yScale(d['value']);\n        })\n        .attr(\"r\", 5)\n        .style(\"fill\", (d,i)=>{\n            if (d.code === 180) {\n                return 'red';\n            }\n            return colorBrewer(countryIndex(d.code));\n        })\n        .style('stroke', '#ccc')\n        .style(\"opacity\", 0.65);\n\n    industrializationPlotInstance.slideChart.append('text')\n        .attr('class', 'gtooltip')\n        .attr('transform', d =>{ \n            return  'translate(' + [xScale(countryIndex(d.code)), yScale(d['value'])-10] + ')'\n        })\n        .text(function(d){\n\n            let country = industrializationPlotInstance.countries.find(dc => dc.id === d.code);\n            if (d.code === 180) {\n                country = {};\n                country.code = 'World Median';\n            }\n            return  country.code + \" in \"+yearId+\": \"\n                            + parseFloat(d['value']).toFixed(2);\n        });\n\n    // industrializationPlotInstance.industrializationsvg.selectAll('.d3-tip').remove();\n    // let toolTip = d3.tip()\n    //         .attr(\"class\", \"d3-tip\")\n    //         .offset([40, 0])\n    //         .html(d => {\n    //             console.log('mmm')\n    //             return \"<h6 align='center'>\" + d['code'] + \" in \"+yearId+\": </h6><p align='center'>\"\n    //                 + parseFloat(d['value']).toFixed(2) + \"%</p>\"\n    //         });\n    // industrializationPlotInstance.industrializationsvg.call(toolTip);\n\n    // circleneter\n    //     .on(\"mouseover\", toolTip.show)\n    //     .on(\"mouseout\", toolTip.hide);\n\n    industrializationPlotInstance.slideChartEnter.exit().remove();\n}\n\nfunction createOptionsForSelection(indicatorsInfo) {\n    select = document.getElementById('industrialParameter');\n    for (var i = 0; i < indicatorsInfo.length; i++) {\n        let opt = document.createElement('option');\n        opt.value = indicatorsInfo[i].id;\n        opt.innerHTML = indicatorsInfo[i].name;\n        select.appendChild(opt);\n    }\n}\n\nfunction createOptionsForCountry(countriesInfo) {\n    select = document.getElementById('countryParameter');\n    for (var i = 0; i < countriesInfo.length; i++) {\n        let opt = document.createElement('option');\n        opt.value = countriesInfo[i].id;\n        opt.innerHTML = countriesInfo[i].code;\n        select.appendChild(opt);\n    }\n}\n\nfunction drawLinePlotForOverview(paramId) {\n\n\n    let lineInterpolate = d3.line()\n                .x(function(d) { return industrializationPlotInstance.xScale(d.year); })\n                .y(function(d) { return industrializationPlotInstance.yScale(+d.value); });\n\n    // if(chartOverviewInstance.slideOneChart === '') {\n    //     return false;\n    // }\n    industrializationPlotInstance.slideChartEnter = industrializationPlotInstance.slideChart.selectAll('.line-plot')\n        .data(d => {\n            return [d.values];});\n\n    let colorBrewer = d3.scaleSequential().domain([1,200])\n        .interpolator(d3.interpolateYlGnBu);\n    let path = industrializationPlotInstance.slideChartEnter.enter()\n        .append('path')\n        .attr('class', 'line-plot')\n        .attr('id', d => `${paramId}-${d[0].code}`)\n        .attr('d', lineInterpolate)\n        .style('stroke', (d,i)=> {\n            if (d[0].code === 180) {\n                return 'red';\n            }\n            return colorBrewer(countryIndex(d[0].code));\n        })\n        .on('mouseover', function(d, i){\n            d3.select(this)                        \n        \t.style(\"stroke-width\",'4px');\n            let [x,y] = d3.mouse(this);\n            mouseyear = Math.floor(industrializationPlotInstance.xScale.invert(x))\n\n            let obj = d.find(c => +c.year === +mouseyear);\n            let country = industrializationPlotInstance.countries.find(dc => dc.id === obj.code);\n            if (obj.code === 180) {\n                country = {};\n                country.code = 'World Median';\n            }\n            let message = `${country.code} in ${obj.year}: ${parseFloat(obj.value).toFixed(2)}`;\n            industrializationPlotInstance.industrializationsvg\n                .append(\"text\")\n                .attr('class', 'ggtooltip')\n                .attr(\"x\", x)\n                .attr(\"y\", y-20)     \n                .attr('fill', 'black')\n                .text(message);  \n        })\n        .on('mouseout', function() {\n            d3.select(this)                        \n        \t.style(\"stroke-width\",'2px');\n            d3.selectAll('.ggtooltip').remove();\n        });\n\n        $('#slider-time').find('svg').remove();\n    \n    // let toolTip = d3.tip()\n    //         .attr(\"class\", \"d3-tip\")\n    //         .offset([40, 0])\n    //         .html(d => {\n    //             console.log(d);\n    //             console.log(industrializationPlotInstance.countries);\n    //             return \"<h6 align='center'>\" + d[0]['code'] + \" in \"+d[0]['year']+\"</h6><p align='center'>\"\n    //                 + parseFloat(d[0]['value']).toFixed(2) + \"%</p>\"\n    //         });\n    // industrializationPlotInstance.industrializationsvg.call(toolTip);\n\n    // path\n    //     .on(\"mouseover\", toolTip.show)\n    //     .on(\"mouseout\", toolTip.hide);\n\n\n    // let tooltip = industrializationPlotInstance.slideChartEnter.append(\"g\")\n    //     .attr(\"class\", \"tooltip\")\n    //     .style(\"display\", \"none\");\n    \n    // tooltip\n    //     .append('cirlce')\n    //     .attr('r', 2);\n            \n\n    // tooltip.append(\"text\")\n    //     .attr('class', 'tooltip-text')\n    //     .attr(\"x\", 60)\n    //   \t.attr(\"y\", 18);\n\n\n    // let tooltip = industrializationPlotInstance.slideChart.append('text')\n    // .attr('class', 'gtooltip')\n    // // .attr('transform', d =>{ \n    // //     return  'translate(' + [xScale(countryIndex(d.code)), yScale(d['value'])-10] + ')'\n    // // })\n    // .text(function(d){\n    //     return  d['code'] + \" in \"+yearId+\": \"\n    //                     + parseFloat(d['value']).toFixed(2);\n    // })\n    // .on(\"mousemove\", mousemove);;\n\n    // function mousemove() {\n    //     var x0 = x.invert(d3.mouse(this)[0]),\n    //         i = bisectDate(data, x0, 1),\n    //         d0 = data[i - 1],\n    //         d1 = data[i],\n    //         d = x0 - d0.date > d1.date - x0 ? d1 : d0;\n    //     focus.attr(\"transform\", \"translate(\" + x(d.date) + \",\" + y(d.likes) + \")\");\n    //     tooltip.attr(\"style\", \"left:\" + (x(d.date) + 64) + \"px;top:\" + y(d.likes) + \"px;\");\n    //     tooltip.select(\".tooltip-date\").text(dateFormatter(d.date));\n    //     tooltip.select(\".tooltip-likes\").text(formatValue(d.likes));\n    // }\n\n    industrializationPlotInstance.slideChartEnter.exit().remove();\n    return true;\n}\n\n\n\nfunction getYearInformation(instance) {\n    const start = 1990;\n    const end = 2014;\n    let arr = []\n    for(let i=start; i <= end; i++){\n        let value = instance[i];\n        let code = instance['Country ISO3'];\n        arr.push({year: i,\n            value : value,\n            code: code});\n    }\n\n    return arr;\n}\n\n\n\n\nfunction getMedian(information) {\n    const start = 1990;\n    const end = 2014;\n    let yearwise = []\n    for(let i=0; i <= end-start; i++){\n        let year = information[i];\n        let value = year['details'][142].value;\n        let details = {};\n        details['year'] = i+start;\n        details['code'] = 180;\n        details['value'] = value;\n\n        yearwise.push(details);\n    }\n\n    return yearwise;\n}\n\nfunction getYearWiseInformation(filtered) {\n    const start = 1990;\n    const end = 2014;\n    let yearwise = [];\n    for(let i=start; i <= end; i++){\n        let arr = [];\n        let details = {};\n        details['year'] = i;\n        details['details'] = filtered.map(c => {\n            let obj = {};\n            obj['country'] = c['Country Name'];\n            obj['code'] = c['Country ISO3'];\n            obj['value'] = c[i];\n            arr.push(c[i]);\n            return obj;\n        });\n\n\n        let median = d3.median(arr);\n        let obj = {};\n        obj['country'] = 'World Median';\n        obj['code'] = 180;\n        obj['value'] = median;\n        details['details'].push(obj);\n\n        yearwise.push(details);\n    }\n\n    return yearwise;\n}\n\n$(document).ready(() => {\n    $('#countryParameter').select2({\n        placeholder: \"Select a country to filter\",\n        allowClear: true,\n        width: 400\n    });\n    $('#countryParameter').on('change', (event) => {\n        console.log($(event.target).val());\n        let countryCodes = $(event.target).val();\n\n        let paramId = $('#industrialParameter').val();\n        let chartTypeParamter = $('input[name=\"chartTypeParameter\"]:checked').val()\n\n        conditionalCallBack(chartTypeParamter, paramId, countryCodes);\n    });\n\n    $('#industrialParameter').on('change', (event) => {\n        let paramId = $(event.target).val();\n        let chartTypeParamter = $('input[name=\"chartTypeParameter\"]:checked').val()\n        let countryCodes = $('#countryParameter').val();\n        conditionalCallBack(chartTypeParamter, paramId, countryCodes);\n    });\n\n    $('input[name=\"chartTypeParameter\"]').on('change', (event) => {\n        let chartTypeParameter = $(event.target).val();\n        let paramId = $('#industrialParameter').val();\n        let countryCodes = $('#countryParameter').val();\n        industrializationPlotInstance.industrializationChartTyep = chartTypeParameter;\n        // callback to rerender line graph\n        conditionalCallBack(chartTypeParameter, paramId, countryCodes);\n    });\n\n\n});\n\n\nfunction conditionalCallBack(chartTypeParameter, paramId, countryCodes) {\n    if($('#countryParameter').val().length !== 0 && chartTypeParameter == 'line') {\n        let stats = industrializationPlotInstance.indicatorCountryWiseInformation[paramId].filter(c => {\n            return countryCodes.findIndex(v => v === c.code || c.code === 180) > -1\n        });\n        drawLineChart(stats,paramId);\n    } else if(chartTypeParameter == 'line') {\n        drawLineChart(industrializationPlotInstance.indicatorCountryWiseInformation[paramId],paramId)\n    } else if($('#countryParameter').val().length !== 0 && chartTypeParameter == 'bubble') {\n        let yearId = 2003;\n        statistics = indicatorYearWiseInformation[paramId];  \n        let stats = []\n        statistics.forEach(s => {\n            let obj = {};\n            obj.year = s.year;\n            obj.details = s['details'].filter(c => countryCodes.findIndex(v => v === c.code || c.code === 180) > -1);\n            stats.push(obj);\n        });\n        drawBubblePlot(stats, paramId, yearId);\n    } else if(chartTypeParameter == 'bubble') {\n        let yearId = 2003;\n        statistics = indicatorYearWiseInformation[paramId];  \n        drawBubblePlot(statistics, paramId, yearId);\n    }\n}\n","class BubbleOverview {\n    constructor(){}\n}\nvar bubbleOverViewIntance = new BubbleOverview();\n\nbubbleOverViewIntance.promises = [d3.json(\"./data-csv/continent-names.json\"),\n d3.csv('./data-csv/newcountries2.csv')];\n\nPromise.all(bubbleOverViewIntance.promises).then(function(data){\n    createBubbleChart(data[1], data[0]);\n});\n\nfunction createBubbleChart(countries, continentNames) {\n    var CR = countries.map(function(country) { return +country.CR; });\n    var VU = countries.map(function(country) { return +country.VU; });\n    var EX = countries.map(function(country) { return +country.EX; });\n    var LC = countries.map(function(country) { return +country.LC; });\n    var EN = countries.map(function(country) { return +country.EN; });\n    var NT = countries.map(function(country) { return +country.NT; });\n    var meanCR = d3.mean(CR),\n        CRExtent = d3.extent(CR),\n        CRScaleX,\n        CRScaleY;\n    var meanVU = d3.mean(VU),\n        VUExtent = d3.extent(VU),\n        VUScaleX,\n        VUScaleY;\n    var meanEX = d3.mean(EX),\n        EXExtent = d3.extent(EX),\n        EXScaleX,\n        EXScaleY;\n    var meanLC = d3.mean(LC),\n        LCExtent = d3.extent(LC),\n        LCScaleX,\n        LCScaleY;\n    var meanNT = d3.mean(NT),\n        NTExtent = d3.extent(NT),\n        NTScaleX,\n        NTScaleY;\n    var meanEN = d3.mean(EN),\n        ENExtent = d3.extent(EN),\n        ENScaleX,\n        ENScaleY;\n\n    var continents = d3.set(countries.map(function(country) { return country.ContinentCode; }));\n    var continentColorScale = d3.scaleOrdinal(d3.schemeCategory10)\n        .domain(continents.values());\n\n    var width = 900,\n        height = 700;\n    var svg,\n        circles,\n        circleSize = { min: 10, max: 40 };\n    circleRadiusScale = d3.scaleSqrt()\n        .domain(CRExtent)\n        .range([circleSize.min, circleSize.max]); \n    if (isChecked('#population', false, 'arrangeby')) {\n        circleRadiusScale = d3.scaleSqrt()\n            .domain(CRExtent)\n            .range([circleSize.min, circleSize.max]);\n    } else if (isChecked('#vulnerable', false, 'arrangeby')) {\n        circleRadiusScale = d3.scaleSqrt()\n            .domain(VUExtent)\n            .range([circleSize.min, circleSize.max]);\n    } else if (isChecked('#extinct', false, 'arrangeby')) {\n        circleRadiusScale = d3.scaleSqrt()\n            .domain(EXExtent)\n            .range([circleSize.min, circleSize.max]);\n    } else if (isChecked('#leastconcern', false, 'arrangeby')) {\n        circleRadiusScale = d3.scaleSqrt()\n            .domain(LCExtent)\n            .range([circleSize.min, circleSize.max]);\n    } else if (isChecked('#endangered', false, 'arrangeby')) {\n        circleRadiusScale = d3.scaleSqrt()\n            .domain(ENExtent)\n            .range([circleSize.min, circleSize.max]);\n    } else if (isChecked('#nearthreatened', false, 'arrangeby')) {\n        circleRadiusScale = d3.scaleSqrt()\n            .domain(NTExtent)\n            .range([circleSize.min, circleSize.max]);\n    }\n\n\n    var forces,\n        forceSimulation;\n\n    createSVG();\n    toggleContinentKey(!flagFill());\n    createCircles();\n    createForces();\n    createForceSimulation();\n    addFlagDefinitions();\n    addFillListener();\n    addGroupingListeners();\n\n    function createSVG() {\n        svg = d3.select(\"#bubble-chart\")\n            .select(\"svg\");\n    }\n\n    function toggleContinentKey(showContinentKey) {\n        var keyElementWidth = 150,\n            keyElementHeight = 30;\n        var onScreenYOffset = keyElementHeight * 1.5,\n            offScreenYOffset = 100;\n\n        if (d3.select(\".continent-key\").empty()) {\n            createContinentKey();\n        }\n        var continentKey = d3.select(\".continent-key\");\n\n        if (showContinentKey) {\n            translateContinentKey(\"translate(0,\" + (height - onScreenYOffset) + \")\");\n        } else {\n            translateContinentKey(\"translate(0,\" + (height + offScreenYOffset) + \")\");\n        }\n\n        function createContinentKey() {\n            var keyWidth = keyElementWidth * continents.values().length;\n            var continentKeyScale = d3.scaleBand()\n                .domain(continents.values())\n                .range([(width - keyWidth) / 2, (width + keyWidth) / 2]);\n\n            svg.append(\"g\")\n                .attr(\"class\", \"continent-key\")\n                .attr(\"transform\", \"translate(0,\" + (height + offScreenYOffset) + \")\")\n                .selectAll(\"g\")\n                .data(continents.values())\n                .enter()\n                .append(\"g\")\n                .attr(\"class\", \"continent-key-element\");\n\n            d3.selectAll(\"g.continent-key-element\")\n                .append(\"rect\")\n                .attr(\"width\", keyElementWidth)\n                .attr(\"height\", keyElementHeight)\n                .attr(\"x\", function(d) { return continentKeyScale(d); })\n                .attr(\"fill\", function(d) { return continentColorScale(d); });\n\n            d3.selectAll(\"g.continent-key-element\")\n                .append(\"text\")\n                .attr(\"text-anchor\", \"middle\")\n                .attr(\"x\", function(d) { return continentKeyScale(d) + keyElementWidth / 2; })\n                .text(function(d) { return continentNames[d]; });\n\n            // The text BBox has non-zero values only after rendering\n            d3.selectAll(\"g.continent-key-element text\")\n                .attr(\"y\", function(d) {\n                    var textHeight = this.getBBox().height;\n                    // The BBox.height property includes some extra height we need to remove\n                    var unneededTextHeight = 4;\n                    return ((keyElementHeight + textHeight) / 2) - unneededTextHeight;\n                });\n        }\n\n        function translateContinentKey(translation) {\n            continentKey\n                .transition()\n                .duration(500)\n                .attr(\"transform\", translation);\n        }\n    }\n\n    function flagFill() {\n        return isChecked(\"#flags\", true);\n    }\n\n    function isChecked(elementID, radio, selectorId) {\n        if(radio) {\n            return d3.select(elementID).property(\"checked\");\n        }\n        return ('#' + $('#' + selectorId).val()) === elementID;\n    }\n\n    function createCircles() { // circles to be drawn based on what is selected\n        var formatPopulation = d3.format(\",\");\n        circles = svg.selectAll(\"circle\")\n            .data(countries)\n            .enter()\n            .append(\"circle\")\n            .attr(\"r\", function(d) { return circleRadiusScale(d.CR); })\n            .on(\"mouseover\", function(d) {\n                updateCountryInfo(d);\n            })\n            .on(\"mouseout\", function(d) {\n              updateCountryInfo();\n            });\n        updateCircles();\n\n        function updateCountryInfo(country) { // info should depend on which radio box is checked - if VU or CR or others etc\n            var info = \"\";\n\n            if (country) {\n                info = [country.CountryName, formatPopulation(country.CR)].join(\": \");\n                /// info = country.CountryName+ \": CR :\"+ country.CR + \" VU :\" + country.VU;\n                if (isChecked(\"#population\", false, 'arrangeby'))\n                    info = country.CountryName + \": \" + country.CR;\n                if (isChecked(\"#vulnerable\", false, 'arrangeby'))\n                    info = country.CountryName + \": \" + country.VU;\n                if (isChecked(\"#extinct\", false, 'arrangeby'))\n                    info = country.CountryName + \": \" + country.EX;\n                if (isChecked(\"#leastconcern\", false, 'arrangeby'))\n                    info = country.CountryName + \": \" + country.LC;\n                if (isChecked(\"#endangered\", false, 'arrangeby'))\n                    info = country.CountryName + \": \" + country.EN;\n                if (isChecked(\"#nearthreatened\", false, 'arrangeby'))\n                    info = country.CountryName + \": \" + country.NT;\n            }\n            d3.select(\"#country-info\").html(info);\n        }\n    }\n\n    function updateCircles() {\n        circles\n            .attr(\"fill\", function(d) {\n                return flagFill() ? \"url(#\" + d.CountryCode + \")\" : continentColorScale(d.ContinentCode);\n            });\n    }\n\n    function createForces() {\n        var forceStrength = 0.05;\n\n        forces = {\n            combine: createCombineForces(),\n            countryCenters: createCountryCenterForces(),\n            continent: createContinentForces(),\n            population: createPopulationForces(),\n            vulnerable: createVulnerableForces(),\n            leastconcern: createleastconcernForces(),\n            endangered: createendangeredForces(),\n            nearthreatened: createnearthreatenedForces(),\n            extinct: createExtinctForces()\n\n\n\n        };\n\n        function createCombineForces() {\n            return {\n                x: d3.forceX(width / 2).strength(forceStrength),\n                y: d3.forceY(height / 2).strength(forceStrength)\n            };\n        }\n\n        function createCountryCenterForces() {\n            var projectionStretchY = 0.25,\n                projectionMargin = circleSize.max,\n                projection = d3.geoEquirectangular()\n                .scale((width / 2 - projectionMargin) / Math.PI)\n                .translate([width / 2, height * (1 - projectionStretchY) / 2]);\n\n            return {\n                x: d3.forceX(function(d) {\n                    return projection([d.CenterLongitude, d.CenterLatitude])[0];\n                }).strength(forceStrength),\n                y: d3.forceY(function(d) {\n                    return projection([d.CenterLongitude, d.CenterLatitude])[1] * (1 + projectionStretchY);\n                }).strength(forceStrength)\n            };\n        }\n\n        function createContinentForces() {\n            return {\n                x: d3.forceX(continentForceX).strength(forceStrength),\n                y: d3.forceY(continentForceY).strength(forceStrength)\n            };\n\n            function continentForceX(d) {\n                if (d.ContinentCode === \"EU\") {\n                    return left(width);\n                } else if (d.ContinentCode === \"AF\") {\n                    return left(width);\n                } else if (d.ContinentCode === \"AS\") {\n                    return right(width);\n                } else if (d.ContinentCode === \"NA\" || d.ContinentCode === \"SA\") {\n                    return right(width);\n                }\n                return center(width);\n            }\n\n            function continentForceY(d) {\n                if (d.ContinentCode === \"EU\") {\n                    return top(height);\n                } else if (d.ContinentCode === \"AF\") {\n                    return bottom(height);\n                } else if (d.ContinentCode === \"AS\") {\n                    return top(height);\n                } else if (d.ContinentCode === \"NA\" || d.ContinentCode === \"SA\") {\n                    return bottom(height);\n                }\n                return center(height);\n            }\n\n            function left(dimension) { return dimension / 4; }\n\n            function center(dimension) { return dimension / 2; }\n\n            function right(dimension) { return dimension / 4 * 3; }\n\n            function top(dimension) { return dimension / 4; }\n\n            function bottom(dimension) { return dimension / 4 * 3; }\n        }\n\n        function createPopulationForces() {\n            var continentNamesDomain = continents.values().map(function(continentCode) {\n                return continentNames[continentCode];\n            });\n            var scaledCRMargin = circleSize.max;\n\n            CRScaleX = d3.scaleBand()\n                .domain(continentNamesDomain)\n                .range([scaledCRMargin, width - scaledCRMargin * 2]);\n            CRScaleY = d3.scaleLinear()\n                .domain(CRExtent)\n                .range([height - scaledCRMargin, scaledCRMargin * 2]);\n\n            var centerCirclesInScaleBandOffset = CRScaleX.bandwidth() / 2;\n            return {\n                x: d3.forceX(function(d) {\n                    return CRScaleX(continentNames[d.ContinentCode]) + centerCirclesInScaleBandOffset;\n                }).strength(forceStrength),\n                y: d3.forceY(function(d) {\n                    return CRScaleY(d.CR);\n                }).strength(forceStrength)\n            };\n        }\n\n        function createnearthreatenedForces() {\n            var continentNamesDomain = continents.values().map(function(continentCode) {\n                return continentNames[continentCode];\n            });\n            var scaledNTMargin = circleSize.max;\n\n                NTScaleX = d3.scaleBand()\n                    .domain(continentNamesDomain)\n                    .range([scaledNTMargin, width - scaledNTMargin * 2]);\n                NTScaleY = d3.scaleLinear()\n                    .domain(NTExtent)\n                    .range([height - scaledNTMargin, scaledNTMargin * 2]);\n\n                var centerCirclesInScaleBandOffset = NTScaleX.bandwidth() / 2;\n                return {\n                    x: d3.forceX(function(d) {\n                        return NTScaleX(continentNames[d.ContinentCode]) + centerCirclesInScaleBandOffset;\n                    }).strength(forceStrength),\n                    y: d3.forceY(function(d) {\n                        return NTScaleY(d.NT);\n                    }).strength(forceStrength)\n                };\n            }\n\n            function createVulnerableForces() {\n\n                var continentNamesDomain = continents.values().map(function(continentCode) {\n                    return continentNames[continentCode];\n                });\n                var scaledVUMargin = circleSize.max;\n\n                VUScaleX = d3.scaleBand()\n                    .domain(continentNamesDomain)\n                    .range([scaledVUMargin, width - scaledVUMargin * 2]);\n                VUScaleY = d3.scaleLinear()\n                    .domain(VUExtent)\n                    .range([height - scaledVUMargin, scaledVUMargin * 2]);\n\n                var centerCirclesInScaleBandOffset = VUScaleX.bandwidth() / 2;\n                return {\n                    x: d3.forceX(function(d) {\n                        return VUScaleX(continentNames[d.ContinentCode]) + centerCirclesInScaleBandOffset;\n                    }).strength(forceStrength),\n                    y: d3.forceY(function(d) {\n                        return VUScaleY(d.VU);\n                    }).strength(forceStrength)\n                };\n            }\n\n            function createExtinctForces() {\n                var continentNamesDomain = continents.values().map(function(continentCode) {\n                    return continentNames[continentCode];\n                });\n                var scaledEXMargin = circleSize.max;\n\n                EXScaleX = d3.scaleBand()\n                    .domain(continentNamesDomain)\n                    .range([scaledEXMargin, width - scaledEXMargin * 2]);\n                EXScaleY = d3.scaleLinear()\n                    .domain(EXExtent)\n                    .range([height - scaledEXMargin, scaledEXMargin * 2]);\n\n                var centerCirclesInScaleBandOffset = EXScaleX.bandwidth() / 2;\n                return {\n                    x: d3.forceX(function(d) {\n                        return EXScaleX(continentNames[d.ContinentCode]) + centerCirclesInScaleBandOffset;\n                    }).strength(forceStrength),\n                    y: d3.forceY(function(d) {\n                        return EXScaleY(d.EX);\n                    }).strength(forceStrength)\n                };\n            }\n    \n\n        function createendangeredForces() {\n        var continentNamesDomain = continents.values().map(function(continentCode) {\n            return continentNames[continentCode];\n        });\n        var scaledENMargin = circleSize.max;\n\n        ENScaleX = d3.scaleBand()\n            .domain(continentNamesDomain)\n            .range([scaledENMargin, width - scaledENMargin * 2]);\n        ENScaleY = d3.scaleLinear()\n            .domain(ENExtent)\n            .range([height - scaledENMargin, scaledENMargin * 2]);\n\n        var centerCirclesInScaleBandOffset = ENScaleX.bandwidth() / 2;\n        return {\n            x: d3.forceX(function(d) {\n                return ENScaleX(continentNames[d.ContinentCode]) + centerCirclesInScaleBandOffset;\n            }).strength(forceStrength),\n            y: d3.forceY(function(d) {\n                return ENScaleY(d.EN);\n            }).strength(forceStrength)\n        };\n    }\n\n\n    function createleastconcernForces() {\n        var continentNamesDomain = continents.values().map(function(continentCode) {\n            return continentNames[continentCode];\n        });\n        var scaledLCMargin = circleSize.max;\n\n        LCScaleX = d3.scaleBand()\n            .domain(continentNamesDomain)\n            .range([scaledLCMargin, width - scaledLCMargin * 2]);\n        LCScaleY = d3.scaleLinear()\n            .domain(LCExtent)\n            .range([height - scaledLCMargin, scaledLCMargin * 2]);\n\n        var centerCirclesInScaleBandOffset = LCScaleX.bandwidth() / 2;\n        return {\n            x: d3.forceX(function(d) {\n                return LCScaleX(continentNames[d.ContinentCode]) + centerCirclesInScaleBandOffset;\n            }).strength(forceStrength),\n            y: d3.forceY(function(d) {\n                return LCScaleY(d.LC);\n            }).strength(forceStrength)\n        };\n    }\n  }\n\n\nfunction createForceSimulation() {\n    forceSimulation = d3.forceSimulation()\n        .force(\"x\", forces.combine.x)\n        .force(\"y\", forces.combine.y)\n        .force(\"collide\", d3.forceCollide(forceCollide));\n    forceSimulation.nodes(countries)\n        .on(\"tick\", function() {\n            circles\n                .attr(\"cx\", function(d) { return d.x; })\n                .attr(\"cy\", function(d) { return d.y; });\n        });\n}\n\nfunction forceCollide(d) { // for default I guess? hence D.CR will be fine\n\n\n    return countryCenterGrouping() || populationGrouping() || leastconcernGrouping() || endangeredGrouping() || extinctGrouping() || nearthreatenedGrouping() || vulnerableGrouping() ? 0 : circleRadiusScale(d.CR) + 1;\n\n\n}\n\nfunction countryCenterGrouping() {\n    return isChecked(\"#country-centers\", false, 'arrangeby');\n}\n\nfunction populationGrouping() {\n    return isChecked(\"#population\", false, 'arrangeby');\n}\n\nfunction vulnerableGrouping() {\n    return isChecked(\"#vulnerable\", false, 'arrangeby');\n}\n\nfunction extinctGrouping() {\n    return isChecked(\"#extinct\", false, 'arrangeby');\n}\n\nfunction endangeredGrouping() {\n    return isChecked(\"#endangered\", false, 'arrangeby');\n}\n\nfunction nearthreatenedGrouping() {\n    return isChecked(\"#nearthreatened\", false, 'arrangeby');\n}\n\n\n\nfunction leastconcernGrouping() {\n    return isChecked(\"#leastconcern\", false, 'arrangeby');\n}\n\n\n\n\nfunction addFlagDefinitions() {\n    var defs = svg.append(\"defs\");\n    defs.selectAll(\".flag\")\n        .data(countries)\n        .enter()\n        .append(\"pattern\")\n        .attr(\"id\", function(d) { return d.CountryCode; })\n        .attr(\"class\", \"flag\")\n        .attr(\"width\", \"100%\")\n        .attr(\"height\", \"100%\")\n        .attr(\"patternContentUnits\", \"objectBoundingBox\")\n        .append(\"image\")\n        .attr(\"width\", 1)\n        .attr(\"height\", 1)\n        .attr(\"preserveAspectRatio\", \"xMidYMid slice\")\n        .attr(\"xlink:href\", function(d) {\n            return \"./data-csv/flags/\" + d.CountryCode + \".svg\";\n        });\n}\n\nfunction addFillListener() {\n    d3.selectAll('input[name=\"fill\"]')\n        .on(\"change\", function() {\n            toggleContinentKey(!flagFill() && !populationGrouping());\n            updateCircles();\n        });\n}\n\nfunction addGroupingListeners() {\n    // addListener(\"#combine\", forces.combine);\n    // addListener(\"#country-centers\", forces.countryCenters);\n    // addListener(\"#continents\", forces.continent);\n    // addListener(\"#population\", forces.population);\n    // addListener(\"#vulnerable\", forces.vulnerable);\n    // addListener(\"#extinct\", forces.extinct);\n    // addListener(\"#endangered\", forces.endangered);\n    // addListener(\"#nearthreatened\", forces.nearthreatened);\n    // addListener(\"#leastconcern\", forces.leastconcern);\n\n    // addListener(\"#arrangeby\", \"combine\", forces.combine);\n    // addListener(\"#arrangeby\", \"country-centers\", forces.countryCenters);\n    // addListener(\"#arrangeby\", \"continents\", forces.continent);\n    // addListener(\"#arrangeby\", \"population\", forces.population);\n    // addListener(\"#arrangeby\", \"vulnerable\", forces.vulnerable);\n    // addListener(\"#arrangeby\", \"extinct\", forces.extinct);\n    // addListener(\"#arrangeby\", \"endangered\", forces.endangered);\n    // addListener(\"#arrangeby\", \"nearthreatened\", forces.nearthreatened);\n    // addListener(\"#arrangeby\", \"leastconcern\", forces.leastconcern);\n\n\n    addListener('','');\n\n\n    function addListener(selector, id) {\n        $('#arrangeby').on(\"change\", function(event) {\n            if($(event.target).val() === 'combine') {\n                updateForces(forces.combine);\n            } else if($(event.target).val() === 'country-centers') {\n                updateForces(forces.countryCenters);\n            } else if($(event.target).val() === 'continents') {\n                updateForces(forces.continent);\n            } \n            toggleContinentKey(!flagFill() && !populationGrouping() && !vulnerableGrouping() && !leastconcernGrouping() && !extinctGrouping() && !nearthreatenedGrouping() && !endangeredGrouping());\n            if (isChecked('#population', false, 'arrangeby')) {\n                togglePopulationAxes(populationGrouping());\n            } else if (isChecked('#vulnerable', false, 'arrangeby')) {\n                toggleVulnerableAxis(vulnerableGrouping());\n            } else if (isChecked('#extinct', false, 'arrangeby')) {\n                toggleExtinctAxis(extinctGrouping());\n            } else if (isChecked('#endangered', false, 'arrangeby'))\n                toggleEndangeredAxis(endangeredGrouping());\n            else if (isChecked('#nearthreatened', false, 'arrangeby'))\n                toggleNearThreatenedAxis(nearthreatenedGrouping());\n            else if (isChecked('#leastconcern', false, 'arrangeby'))\n                toggleLeastConcernAxis(leastconcernGrouping());\n            \n        });\n\n\n        $('#arrangeby').on(\"change\", function(event) {\n            if($(event.target).val() === 'population') {\n                updateForces(forces.population);\n            } else if($(event.target).val() === 'vulnerable') {\n                updateForces(forces.vulnerable);\n            } else if($(event.target).val() === 'extinct') {\n                updateForces(forces.extinct);\n            } else if($(event.target).val() === 'endangered') {\n                updateForces(forces.endangered);\n            } else if($(event.target).val() === 'nearthreatened') {\n                updateForces(forces.nearthreatened);\n            } else if($(event.target).val() === 'leastconcern') {\n                updateForces(forces.leastconcern);\n            } \n            toggleContinentKey(!flagFill() && !populationGrouping() && !vulnerableGrouping() && !leastconcernGrouping() && !extinctGrouping() && !nearthreatenedGrouping() && !endangeredGrouping());\n            if (isChecked('#population', false, 'arrangeby')) {\n                togglePopulationAxes(populationGrouping());\n            } else if (isChecked('#vulnerable', false, 'arrangeby')) {\n                toggleVulnerableAxis(vulnerableGrouping());\n            } else if (isChecked('#extinct', false, 'arrangeby')) {\n                toggleExtinctAxis(extinctGrouping());\n            } else if (isChecked('#endangered', false, 'arrangeby'))\n                toggleEndangeredAxis(endangeredGrouping());\n            else if (isChecked('#nearthreatened', false, 'arrangeby'))\n                toggleNearThreatenedAxis(nearthreatenedGrouping());\n            else if (isChecked('#leastconcern', false, 'arrangeby'))\n                toggleLeastConcernAxis(leastconcernGrouping());\n            \n        });\n    }\n\n    function updateForces(forces) {\n        svg.selectAll(\"#craxis\").remove()\n        svg.selectAll(\"#vuaxis\").remove()\n        svg.selectAll(\"#exaxis\").remove()\n        svg.selectAll(\"#enaxis\").remove()\n         svg.selectAll(\"#ntaxis\").remove()\n         svg.selectAll(\"#lcaxis\").remove()\n         svg.selectAll(\"#xaxis\").remove()\n        forceSimulation\n            .force(\"x\", forces.x)\n            .force(\"y\", forces.y)\n            .force(\"collide\", d3.forceCollide(forceCollide))\n            .alphaTarget(0.5)\n            .restart();\n    }\n\n    function togglePopulationAxes(showAxes) {\n        var onScreenXOffset = 40,\n            offScreenXOffset = -40;\n        var onScreenYOffset = 40,\n            offScreenYOffset = 100;\n        createAxesCR();\n        var xAxis = d3.select(\".x-axis\"),\n            yAxis = d3.select(\".y-axis\");\n\n        if (showAxes) {\n            translateAxis(xAxis, \"translate(0,\" + (height - onScreenYOffset) + \")\");\n            translateAxis(yAxis, \"translate(\" + onScreenXOffset + \",0)\");\n        } else {\n            translateAxis(xAxis, \"translate(0,\" + (height + offScreenYOffset) + \")\");\n            translateAxis(yAxis, \"translate(\" + offScreenXOffset + \",0)\");\n        }\n\n        function createAxesCR() {\n            var numberOfTicks = 10,\n                tickFormat = \".0s\";\n\n            var xAxis = d3.axisBottom(CRScaleX)\n                .ticks(numberOfTicks, tickFormat);\n\n            svg.append(\"g\")\n                .attr(\"class\", \"x-axis\")\n                .attr(\"transform\", \"translate(0,\" + (height + offScreenYOffset) + \")\")\n                .call(xAxis)\n                .attr(\"id\",\"xaxis\")\n                .selectAll(\".tick text\")\n                .attr(\"font-size\", \"16px\");\n\n            var yAxis = d3.axisLeft(CRScaleY)\n                .ticks(numberOfTicks, tickFormat);\n            svg.append(\"g\")\n                .attr(\"class\", \"y-axis\")\n                .attr(\"id\", \"craxis\")\n                .attr(\"transform\", \"translate(\" + offScreenXOffset + \",0)\")\n                .call(yAxis);\n        }\n\n\n        function translateAxis(axis, translation) {\n            axis\n                .transition()\n                .duration(500)\n                .attr(\"transform\", translation);\n        }\n    }\n\n    function toggleVulnerableAxis(showAxes) {\n        var onScreenXOffset = 40,\n                offScreenXOffset = -40;\n            var onScreenYOffset = 40,\n                offScreenYOffset = 100;\n            createAxesVU();\n            var xAxis = d3.select(\".x-axis\"),\n                yAxis = d3.select(\".y-axis\");\n\n            if (showAxes) {\n                translateAxis(xAxis, \"translate(0,\" + (height - onScreenYOffset) + \")\");\n                translateAxis(yAxis, \"translate(\" + onScreenXOffset + \",0)\");\n            } else {\n                translateAxis(xAxis, \"translate(0,\" + (height + offScreenYOffset) + \")\");\n                translateAxis(yAxis, \"translate(\" + offScreenXOffset + \",0)\");\n            }\n\n            function createAxesVU() {\n                var numberOfTicks = 10,\n                    tickFormat = \".0s\";\n\n                var xAxis = d3.axisBottom(VUScaleX)\n                    .ticks(numberOfTicks, tickFormat);\n\n                svg.append(\"g\")\n                    .attr(\"class\", \"x-axis\")\n                    .attr(\"transform\", \"translate(0,\" + (height + offScreenYOffset) + \")\")\n                    .call(xAxis)\n                    .attr(\"id\",\"xaxis\")\n                    .selectAll(\".tick text\")\n                    .attr(\"font-size\", \"16px\");\n\n                var yAxis = d3.axisLeft(VUScaleY)\n                    .ticks(numberOfTicks, tickFormat);\n                svg.append(\"g\")\n                    .attr(\"class\", \"y-axis\")\n                    .attr(\"id\",\"vuaxis\")\n                    .attr(\"transform\", \"translate(\" + offScreenXOffset + \",0)\")\n                    .call(yAxis);\n\n            }\n\n            function translateAxis(axis, translation) {\n                axis\n                    .transition()\n                    .duration(500)\n                    .attr(\"transform\", translation);\n            }\n\n        }\n\n        function toggleEndangeredAxis(showAxes) {\n            var onScreenXOffset = 40,\n                offScreenXOffset = -40;\n            var onScreenYOffset = 40,\n                offScreenYOffset = 100;\n\n            createAxesEN();\n            var xAxis = d3.select(\".x-axis\"),\n                yAxis = d3.select(\".y-axis\");\n\n            if (showAxes) {\n                translateAxis(xAxis, \"translate(0,\" + (height - onScreenYOffset) + \")\");\n                translateAxis(yAxis, \"translate(\" + onScreenXOffset + \",0)\");\n            } else {\n                translateAxis(xAxis, \"translate(0,\" + (height + offScreenYOffset) + \")\");\n                translateAxis(yAxis, \"translate(\" + offScreenXOffset + \",0)\");\n            }\n\n            function createAxesEN() {\n                var numberOfTicks = 10,\n                    tickFormat = \".0s\";\n\n                var xAxis = d3.axisBottom(ENScaleX)\n                    .ticks(numberOfTicks, tickFormat);\n\n                svg.append(\"g\")\n                    .attr(\"class\", \"x-axis\")\n                    .attr(\"transform\", \"translate(0,\" + (height + offScreenYOffset) + \")\")\n                    .call(xAxis)\n                    .attr(\"id\",\"xaxis\")\n                    .attr(\"id\",\"xaxis\")\n                    .selectAll(\".tick text\")\n                    .attr(\"font-size\", \"16px\");\n\n                var yAxis = d3.axisLeft(ENScaleY)\n                    .ticks(numberOfTicks, tickFormat);\n                svg.append(\"g\")\n                    .attr(\"class\", \"y-axis\")\n                    .attr(\"id\",\"enaxis\")\n                    .attr(\"transform\", \"translate(\" + offScreenXOffset + \",0)\")\n                    .call(yAxis);\n\n            }\n\n            function translateAxis(axis, translation) {\n                axis\n                    .transition()\n                    .duration(500)\n                    .attr(\"transform\", translation);\n            }\n\n        }\n\n\n        function toggleLeastConcernAxis(showAxes) {\n            var onScreenXOffset = 40,\n                offScreenXOffset = -40;\n            var onScreenYOffset = 40,\n                offScreenYOffset = 100;\n\n            createAxesLC();\n            var xAxis = d3.select(\".x-axis\"),\n                yAxis = d3.select(\".y-axis\");\n\n            if (showAxes) {\n                translateAxis(xAxis, \"translate(0,\" + (height - onScreenYOffset) + \")\");\n                translateAxis(yAxis, \"translate(\" + onScreenXOffset + \",0)\");\n            } else {\n                translateAxis(xAxis, \"translate(0,\" + (height + offScreenYOffset) + \")\");\n                translateAxis(yAxis, \"translate(\" + offScreenXOffset + \",0)\");\n            }\n\n            function createAxesLC() {\n                var numberOfTicks = 10,\n                    tickFormat = \".0s\";\n\n                var xAxis = d3.axisBottom(LCScaleX)\n                    .ticks(numberOfTicks, tickFormat);\n\n                svg.append(\"g\")\n                    .attr(\"class\", \"x-axis\")\n                    .attr(\"transform\", \"translate(0,\" + (height + offScreenYOffset) + \")\")\n                    .call(xAxis)\n                    .attr(\"id\",\"xaxis\")\n                    .selectAll(\".tick text\")\n                    .attr(\"font-size\", \"16px\");\n\n                var yAxis = d3.axisLeft(LCScaleY)\n                    .ticks(numberOfTicks, tickFormat);\n                svg.append(\"g\")\n                    .attr(\"class\", \"y-axis\")\n                    .attr(\"id\", \"lcaxis\")\n                    .attr(\"transform\", \"translate(\" + offScreenXOffset + \",0)\")\n                    .call(yAxis);\n            }\n\n            function translateAxis(axis, translation) {\n                axis\n                    .transition()\n                    .duration(500)\n                    .attr(\"transform\", translation);\n            }\n        }\n\n        function toggleExtinctAxis(showAxes) {\n            // console.log(showAxes)\n            var onScreenXOffset = 40,\n                offScreenXOffset = -40;\n            var onScreenYOffset = 40,\n                offScreenYOffset = 100;\n\n            createAxesEX();\n            var xAxis = d3.select(\".x-axis\"),\n                yAxis = d3.select(\".y-axis\");\n\n            if (showAxes) {\n                translateAxis(xAxis, \"translate(0,\" + (height - onScreenYOffset) + \")\");\n                translateAxis(yAxis, \"translate(\" + onScreenXOffset + \",0)\");\n            } else {\n                translateAxis(xAxis, \"translate(0,\" + (height + offScreenYOffset) + \")\");\n                translateAxis(yAxis, \"translate(\" + offScreenXOffset + \",0)\");\n            }\n\n            function createAxesEX() {\n                var numberOfTicks = 10,\n                    tickFormat = \".0s\";\n\n                var xAxis = d3.axisBottom(EXScaleX)\n                    .ticks(numberOfTicks, tickFormat);\n\n                svg.append(\"g\")\n                    .attr(\"class\", \"x-axis\")\n                    .attr(\"transform\", \"translate(0,\" + (height + offScreenYOffset) + \")\")\n                    .call(xAxis)\n                    .attr(\"id\",\"xaxis\")\n                    .selectAll(\".tick text\")\n                    .attr(\"font-size\", \"16px\");\n\n                var yAxis = d3.axisLeft(EXScaleY)\n                    .ticks(numberOfTicks, tickFormat);\n                svg.append(\"g\")\n                    .attr(\"class\", \"y-axis\")\n                    .attr(\"id\", \"exaxis\")\n                    .attr(\"transform\", \"translate(\" + offScreenXOffset + \",0)\")\n                    .call(yAxis);\n            }\n\n            function translateAxis(axis, translation) {\n                axis\n                    .transition()\n                    .duration(500)\n                    .attr(\"transform\", translation);\n            }\n        }\n        function toggleNearThreatenedAxis(showAxes) {\n            // console.log(showAxes)\n            var onScreenXOffset = 40,\n                offScreenXOffset = -40;\n            var onScreenYOffset = 40,\n                offScreenYOffset = 100;\n\n            createAxesNT();\n            var xAxis = d3.select(\".x-axis\"),\n                yAxis = d3.select(\".y-axis\");\n\n            if (showAxes) {\n                translateAxis(xAxis, \"translate(0,\" + (height - onScreenYOffset) + \")\");\n                translateAxis(yAxis, \"translate(\" + onScreenXOffset + \",0)\");\n            } else {\n                translateAxis(xAxis, \"translate(0,\" + (height + offScreenYOffset) + \")\");\n                translateAxis(yAxis, \"translate(\" + offScreenXOffset + \",0)\");\n            }\n\n            function createAxesNT() {\n                var numberOfTicks = 10,\n                    tickFormat = \".0s\";\n\n                var xAxis = d3.axisBottom(NTScaleX)\n                    .ticks(numberOfTicks, tickFormat);\n\n                svg.append(\"g\")\n                    .attr(\"class\", \"x-axis\")\n                    .attr(\"transform\", \"translate(0,\" + (height + offScreenYOffset) + \")\")\n                    .call(xAxis)\n                    .attr(\"id\",\"xaxis\")\n                    .selectAll(\".tick text\")\n                    .attr(\"font-size\", \"16px\");\n\n                var yAxis = d3.axisLeft(NTScaleY)\n                    .ticks(numberOfTicks, tickFormat);\n                svg.append(\"g\")\n                    .attr(\"class\", \"y-axis\")\n                    .attr(\"id\", \"ntaxis\")\n                    .attr(\"transform\", \"translate(\" + offScreenXOffset + \",0)\")\n                    .call(yAxis);\n            }\n\n            function translateAxis(axis, translation) {\n                axis\n                    .transition()\n                    .duration(500)\n                    .attr(\"transform\", translation);\n            }\n        }\n    }\n}","let rendered = false;\nfunction handleStepEnterAnimatedStackedPlot(response, callback) {\n    if(!rendered) {\n        rendered = callback();\n    }\n    response.element.classList.add('is-active');\n}\nfunction handleStepExitAnimatedStackedPlot(response) {\n    response.element.classList.remove('is-active');\n}\nfunction handleStepProgressAnimatedStackedPlot(response) {\n}\n\n\nexport { handleStepEnterAnimatedStackedPlot, handleStepExitAnimatedStackedPlot, handleStepProgressAnimatedStackedPlot };","/*\n * File: handleStepEnterFirst.js\n * Project: ScrollyTelling\n * File Created: November 2019\n * Author: Shalini Chaudhuri (you@you.you)\n */\n\n\nlet rendered = false;\nfunction handleStepEnterFirst(response, callback) {\n    if(!rendered) {\n        rendered = callback();\n    }\n    response.element.classList.add('is-active');\n}\nfunction handleStepExitFirst(response) {\n    response.element.classList.remove('is-active');\n}\nfunction handleStepProgressFirst(response) {\n}\n\n\nexport { handleStepEnterFirst, handleStepExitFirst, handleStepProgressFirst };","let rendered = false;\nfunction handleStepEnterForestPlot(response, callback) {\n    if(!rendered) {\n        rendered = callback();\n    }\n    response.element.classList.add('is-active');\n}\nfunction handleStepExitForestPlot(response) {\n    response.element.classList.remove('is-active');\n}\nfunction handleStepProgressForestPlot(response) {\n}\n\n\nexport { handleStepEnterForestPlot, handleStepExitForestPlot, handleStepProgressForestPlot };","function handleStepEnterSecond(response) {\n    response.element.classList.add('is-active');\n}\nfunction handleStepExitSecond(response) {\n    response.element.classList.remove('is-active');\n}\nfunction handleStepProgressSecond(response) {\n}\n\n\nexport {handleStepProgressSecond, handleStepExitSecond, handleStepEnterSecond};","let rendered = false;\nfunction handleStepEnterStackedPercentPlot(response, callback) {\n    if(!rendered) {\n        rendered = callback();\n    }\n    response.element.classList.add('is-active');\n}\nfunction handleStepExitStackedPercentPlot(response) {\n    response.element.classList.remove('is-active');\n}\nfunction handleStepProgressStackedPercentPlot(response) {\n}\n\n\nexport { handleStepEnterStackedPercentPlot, handleStepExitStackedPercentPlot, handleStepProgressStackedPercentPlot };","let rendered = false;\nfunction handleStepEnterStackedPlot(response, callback) {\n    if(!rendered) {\n        rendered = callback();\n    }\n    response.element.classList.add('is-active');\n}\nfunction handleStepExitStackedPlot(response) {\n    response.element.classList.remove('is-active');\n}\nfunction handleStepProgressStackedPlot(response) {\n}\n\n\nexport { handleStepEnterStackedPlot, handleStepExitStackedPlot, handleStepProgressStackedPlot };","/*\n * File: scrollThirdHandler.js\n * Project: ScrollyTelling\n * File Created: November 2019\n * Author: Shalini Chaudhuri (you@you.you)\n */\nfunction handleStepEnterThird(response) {\n    response.element.classList.add('is-active');\n}\nfunction handleStepExitThird(response) {\n    response.element.classList.remove('is-active');\n}\nfunction handleStepProgressThird(response) {\n}\n\nexport {handleStepProgressThird, handleStepEnterThird, handleStepExitThird};","/*\n * File: scrolly.js\n * Project: ScrollyTelling\n * File Created: November 2019\n * Author: Shalini Chaudhuri (you@you.you)\n */\n\nimport {handleStepEnterFirst, handleStepExitFirst, handleStepProgressFirst} from './scrollFirstHandler';\nimport {handleStepProgressSecond, handleStepExitSecond, handleStepEnterSecond} from './scrollSecondHandler';\nimport {handleStepProgressThird, handleStepEnterThird, handleStepExitThird} from './scrollThirdHandler';\nimport {handleStepEnterStackedPlot, handleStepProgressStackedPlot, handleStepExitStackedPlot} from './scrollStackedPlotHandler';\nimport {handleStepEnterStackedPercentPlot, handleStepExitStackedPercentPlot, handleStepProgressStackedPercentPlot} from './scrollStackedPercentHandler';\nimport {handleStepEnterAnimatedStackedPlot, handleStepExitAnimatedStackedPlot, handleStepProgressAnimatedStackedPlot} from \"./scrollAnimatedStackedPlot\";\nimport {handleStepEnterForestPlot, handleStepExitForestPlot, handleStepProgressForestPlot} from \"./scrollForestCover\";\nimport {disintegrateElement} from './disintegrateAnimal';\n\n\n\nimport * as chartOverview from './Chart1Overview/chart1';\nimport * as forestPlt from './forestcoverplot/forestcover'\nimport * as animatedStackedPlt from './stacked plot/animatedStackedPlot'\nimport './industrializationplot/industrializationplot';\nimport './Chart2Map/main';\nimport './overview-bubble-flags/script-copy'\nimport './Chartbubble/extinctBubbleChart';\n\nlet ScrollerFirst, ScrollerSecond, ScrollerThird, ScrollerStackedPlot, ScrollerForestPlot, ScrollerAnimatedStackedPlot; // global for now\n\ndisintegrate.init();\n$(document).ready(() => {\n    // when the doc body is set up\n    setUpBody();\n    // set up the scrollama instance\n    setUpScrollerFirst();\n    setUpScrollerSecond();\n    setUpScrollerThird();\n    setUpScrollerAnimatedStackedPlot();\n    setupScrollForestPlot();\n\n    setUpCarousel();\n\n    // Set up responsive resizing\n    $(document).on('resize', (event) => {\n        Scroller.resize;\n    });\n\n});\n\n/**\n * Prototype function to check scrolly\n */\nfunction setUpBody() {\n    let container = document.querySelector('#narrative');\n    let texts = container.querySelector('.scroll__text');\n    let steps = texts.querySelectorAll('.step');\n\n    // steps.forEach(function (step) {\n    //     var v = 100 + Math.floor(Math.random() * window.innerHeight / 4);\n    //     step.style.padding = v + 'px 0px';\n    // });\n\n\n    \n    let el = document.querySelector('.animalimage');\n    disintegrateElement('.prob_introduction');\n    setTimeout(() => {$('.prob_introduction').toggleClass('active')}, 500);\n    setTimeout(() => {$(el).remove();}, 3000);\n}\n\n/**\n * Set up scrollama instance with the callbacks and params\n */\nfunction setUpScrollerFirst() {\n    ScrollerFirst = scrollama();\n    // define the params for scrollama instance\n    ScrollerFirst.setup({\n        container: '#narrative',\n        step: '#scroll_first .step',\n        offset: '0.5',\n    })\n        .onStepEnter(response => {\n            handleStepEnterFirst(response, chartOverview.drawLinePlotForOverview);\n        })\n        .onStepExit(response => {\n            handleStepExitFirst(response);\n        })\n        .onStepProgress(response => {\n            handleStepProgressFirst(response);\n        });\n}\n\n\nfunction setUpScrollerSecond() {\n    ScrollerSecond = scrollama();\n    // define the params for scrollama instance\n    ScrollerSecond.setup({\n        container: '#narrative',\n        step: '#scroll_second .step',\n        offset: '0.5',\n    })\n        .onStepEnter(response => {\n            handleStepEnterSecond(response);\n        })\n        .onStepExit(response => {\n            handleStepExitSecond(response);\n        })\n        .onStepProgress(response => {\n            handleStepProgressSecond(response);\n        });\n}\n\n\nfunction setUpScrollerThird() {\n    ScrollerThird = scrollama();\n    // define the params for scrollama instance\n    ScrollerThird.setup({\n        container: '#narrative',\n        step: '#scroll_third .step',\n        offset: '0.5',\n    })\n        .onStepEnter(response => {\n            handleStepEnterThird(response);\n        })\n        .onStepExit(response => {\n            handleStepExitThird(response);\n        })\n        .onStepProgress(response => {\n            handleStepProgressThird(response);\n        });\n}\n\nfunction setUpScrollerStackedPlot() {\n    ScrollerStackedPlot = scrollama();\n    // define the params for scrollama instance\n    ScrollerStackedPlot.setup({\n        container: '#narrative',\n        step: '#scroll_stacked_plot .step',\n        offset: '0.5',\n    })\n        .onStepEnter(response => {\n            // handleStepEnterStackedPlot(response, stackedPlt.drawStackedPlot);\n        })\n        .onStepExit(response => {\n            handleStepExitStackedPlot(response);\n        })\n        .onStepProgress(response => {\n            handleStepProgressStackedPlot(response);\n        });\n}\n\nfunction setUpScrollerStackedPercentPlot() {\n    ScrollerStackedPlot = scrollama();\n    // define the params for scrollama instance\n    ScrollerStackedPlot.setup({\n        container: '#narrative',\n        step: '#scroll_stacked_percent .step',\n        offset: '0.5',\n    })\n        .onStepEnter(response => {\n            // handleStepEnterStackedPercentPlot(response, stackedPerPlt.drawStackedPlot);\n        })\n        .onStepExit(response => {\n            handleStepExitStackedPercentPlot(response);\n        })\n        .onStepProgress(response => {\n            handleStepProgressStackedPercentPlot(response);\n        });\n}\n\nfunction setupScrollForestPlot () {\n    ScrollerForestPlot = scrollama();\n    // define the params for scrollama instance\n    ScrollerForestPlot.setup({\n        container: '#narrative',\n        step: '#forest_cover .step',\n        offset: '0.5',\n    })\n        .onStepEnter(response => {\n            handleStepEnterForestPlot(response, forestPlt.buildGraph);\n        })\n        .onStepExit(response => {\n            handleStepExitForestPlot(response);\n        })\n        .onStepProgress(response => {\n            handleStepProgressForestPlot(response);\n        });\n}\n\nfunction setUpScrollerAnimatedStackedPlot () {\n    ScrollerAnimatedStackedPlot = scrollama();\n    // define the params for scrollama instance\n    ScrollerAnimatedStackedPlot.setup({\n        container: '#narrative',\n        step: '#animatedstackedplot .step',\n        offset: '0.5',\n    })\n        .onStepEnter(response => {\n            handleStepEnterAnimatedStackedPlot(response, animatedStackedPlt.update);\n        })\n        .onStepExit(response => {\n            handleStepExitAnimatedStackedPlot(response);\n        })\n        .onStepProgress(response => {\n            handleStepProgressAnimatedStackedPlot(response);\n        });\n}\n\n\n\n\nfunction setUpCarousel() {\n    $('.carousel').carousel({\n        interval: 5000,\n        pause: 'hover'\n      })\n}","class AnimatedStackedPlot {\n    constructor() {\n        this.animatedSvgMargin = {top: 20, right: 150, bottom: 40, left: 80};\n        this.width = 1000 - this.animatedSvgMargin.left - this.animatedSvgMargin.right;\n        this.height = 600 - this.animatedSvgMargin.top - this.animatedSvgMargin.bottom;\n        this.animatedSvg = d3.select(\"#animatedstackedplot\").select('svg')\n            .attr('width', this.width + this.animatedSvgMargin.left + this.animatedSvgMargin.right)\n            .attr('height', this.height + this.animatedSvgMargin.top + this.animatedSvgMargin.bottom)\n            .append('g')\n            .attr('transform', 'translate(' + this.animatedSvgMargin.left + ',' + this.animatedSvgMargin.top + ')');\n    }\n\n    setDataset(dataset) {\n        this.dataset = dataset;\n    }\n\n}\n\n\nvar aspt = new AnimatedStackedPlot();\n// var dataFile = \"stackedplot.csv\";\n\nvar dataFile = \"./data-csv/stackedplot.csv\";\n\nd3.csv(dataFile).then((dataset) => {\n\n    aspt.setDataset(dataset);\n\n\n    // var input = {'data': aspt.dataset, 'width': aspt.width, 'height': aspt.height},\n    //     canvas = setUpSvgCanvas(input);\n\n    drawBars();\n});\n\n\nfunction drawBars() {\n\n    var input = {'data': aspt.dataset, 'width': aspt.width, 'height': aspt.height},\n        canvas = setUpSvgCanvas(input);\n\n    var params = {'input': input, 'canvas': canvas};\n    initialize(params);\n    update(params);\n    return true;\n}\n\n\nfunction initialize(params) {\n\n    // unpacking params\n    var canvas = params.canvas,\n        input = params.input;\n\n    // unpacking canvas\n    var svg = canvas.svg,\n        margin = canvas.margin,\n        width = params.width = canvas.width,\n        height = params.height = canvas.height;\n\n    // processing Data and extracting binNames and clusterNames\n    var formattedData = formatData(input.data),\n        blockData = params.blockData = formattedData.blockData,\n        binNames = params.binNames = formattedData.binNames,\n        clusterNames = params.clusterNames = formattedData.clusterNames;\n\n\n    // initialize color\n    var colorScaleStacked = setUpColors().domain(clusterNames);\n\n\n    // initialize scales and axis\n    var scales = initializeScales(width, height),\n        xScaleStacked = scales.x,\n        yScaleStacked = params.y = scales.y;\n\n    xScaleStacked.domain(binNames);\n    yScaleStacked.domain([0, d3.max(blockData, function (d) {\n        return d.y1;\n    })]).nice();\n\n    initializeAxis(svg, xScaleStacked, yScaleStacked, height, width);\n\n    // initialize bars\n    var barStacked = params.bar = svg.selectAll('.bar')\n        .data(blockData)\n        .enter().append('g')\n        .attr('class', 'bar');\n\n    barStacked.append('rect')\n        .attr('x', function (d) {\n            return xScaleStacked(d.x);\n        })\n        .attr('y', function (d) {\n            return yScaleStacked(0);\n        })\n        .attr('width', xScaleStacked.bandwidth())\n        .attr('height', 0)\n        .attr('fill', function (d) {\n            return colorScaleStacked(d.cluster);\n        });\n\n    // heights is a dictionary to store bar height by cluster\n    // this hierarchy is important for animation purposes\n    // each bar above the chosen bar must collapse to the top of the\n    // selected bar, this function defines this top\n    params.heights = setUpHeights(clusterNames, blockData);\n\n    // defining max of each bin to convert later to percentage\n    params.maxPerBin = setUpMax(clusterNames, blockData);\n\n\n    // variable to store chosen cluster when bar is clicked\n    var chosen = params.chosen = {\n        cluster: null\n    };\n\n    // initialize legend\n    var legend = params.legend = svg.selectAll('.legend')\n        .data(clusterNames)\n        .enter().append('g')\n        .attr('class', 'legend');\n\n    legend.append('rect')\n        .attr('x', width - 20)\n        .attr('y', function (d, i) {\n            return 20 * (clusterNames.length - 1 - i);\n        })\n        .attr('height', 18)\n        .attr('width', 18)\n        .attr('fill', function (d) {\n            return colorScaleStacked(d);\n        })\n        .on('click', function (d) {\n            chosen.cluster = chosen.cluster === d ? null : d;\n            update(params);\n        });\n\n    legend.append('text')\n        .attr('x', 560)\n        .attr('y', function (d, i) {\n            return 20 * (clusterNames.length - 1 - i);\n        })\n        .text(function (d) {\n            return d;\n        })\n        .attr('dy', '.95em')\n\n    // initialize checkbox options\n    d3.select(\"#myCheckbox\").on(\"change\", function () {\n        update(params);\n    });\n\n    params.view = false;\n\n}\n\nfunction update(params) {\n\n    // retrieving params to avoid putting params.x everywhere\n    var svgAnimated = params.canvas.svg,\n        margin = params.canvas.margin,\n        y = params.y,\n        blockData = params.blockData,\n        heights = params.heights,\n        chosen = params.chosen,\n        width = params.width,\n        height = params.height,\n        bar = params.bar,\n        clusterNames = params.clusterNames,\n        binNames = params.binNames,\n        legend = params.legend,\n        maxPerBin = params.maxPerBin,\n        view = params.view;\n\n    var transDuration = 700;\n\n    // re-scaling data if view is changed to percentage\n    // and re-scaling back if normal view is selected\n    var newView = d3.select(\"#myCheckbox\").property(\"checked\");\n\n    if (newView) {\n        if (view != newView) {\n            blockData.forEach(function (d) {\n                d.y0 /= maxPerBin[d.x];\n                d.y1 /= maxPerBin[d.x];\n                d.height /= maxPerBin[d.x];\n            });\n            heights = setUpHeights(clusterNames, blockData);\n        }\n    } else {\n        if (view != newView) {\n            blockData.forEach(function (d) {\n                d.y0 *= maxPerBin[d.x];\n                d.y1 *= maxPerBin[d.x];\n                d.height *= maxPerBin[d.x];\n            });\n            heights = setUpHeights(clusterNames, blockData);\n        }\n    }\n    params.view = newView;\n\n\n    // update Y axis\n    if (chosen.cluster == null) {\n        y.domain([0, d3.max(blockData, function (d) {\n            return d.y1;\n        })]).nice();\n    } else {\n        y.domain([0, d3.max(heights[chosen.cluster])]).nice();\n    }\n\n    if (newView) {\n        y.domain([0, 1]).nice();\n    }\n\n    var axisY = d3.axisLeft(y);\n\n    if (newView) {\n        axisY.tickFormat(d3.format(\".0%\"));\n    }\n\n    svgAnimated.selectAll('.axisY')\n        .transition()\n        .duration(transDuration)\n        .call(axisY);\n\n\n    // update legend\n    legend.selectAll('rect')\n        .transition()\n        .duration(transDuration)\n        .attr('height', function (d) {\n            return choice(chosen.cluster, d, 18, 18, 0);\n        })\n        .attr('y', function (d) {\n            var i = clusterNames.indexOf(d);\n            if (i > clusterNames.indexOf(chosen.cluster)) {\n                return choice(chosen.cluster, d, 20 * (clusterNames.length - 1 - i), 0, 0);\n            } else {\n                return choice(chosen.cluster, d, 20 * (clusterNames.length - 1 - i), 0, 18);\n            }\n        });\n    legend.selectAll('text')\n        .transition()\n        .duration(transDuration)\n        .attr('y', function (d) {\n            var i = clusterNames.indexOf(d);\n            if (i > clusterNames.indexOf(chosen.cluster)) {\n                return choice(chosen.cluster, d, 20 * (clusterNames.length - 1 - i), 0, 0);\n            } else {\n                return choice(chosen.cluster, d, 20 * (clusterNames.length - 1 - i), 0, 18);\n            }\n        })\n        .style('font-size', function (d, i) {\n            return choice(chosen.cluster, d, '15px', '15px', '0px');\n        })\n        .attr('x', function (d) {\n            return choice(chosen.cluster, d,\n                width,\n                width,\n                width - this.getComputedTextLength() / 2);\n        });\n\n\n    // update bars\n    bar.selectAll('rect')\n        .on('click', function (d) {\n            chosen.cluster = chosen.cluster === d.cluster ? null : d.cluster;\n            update(params);\n        })\n        .transition()\n        .duration(transDuration)\n        .attr('y', function (d) {\n            return choice(chosen.cluster, d.cluster,\n                y(d.y1),\n                y(d.height),\n                myHeight(chosen, d, clusterNames, binNames, y, heights));\n        })\n        .attr('height', function (d) {\n            return choice(chosen.cluster, d.cluster,\n                height - y(d.height),\n                height - y(d.height),\n                0);\n        });\n    return true;\n}\n\n// heights is a dictionary to store bar height by cluster\n// this hierarchy is important for animation purposes\nfunction setUpHeights(clusterNames, blockData) {\n    var heights = {};\n    clusterNames.forEach(function (cluster) {\n        var clusterVec = [];\n        blockData.filter(function (d) {\n            return d.cluster == cluster;\n        }).forEach(function (d) {\n            clusterVec.push(d.height);\n        });\n        heights[cluster] = clusterVec;\n    });\n    return heights;\n}\n\n// getting the max value of each bin, to convert back and forth to percentage\nfunction setUpMax(clusterNames, blockData) {\n    var lastClusterElements = blockData.filter(function (d) {\n        return d.cluster == clusterNames[clusterNames.length - 1]\n    })\n    var maxDict = {};\n    lastClusterElements.forEach(function (d) {\n        maxDict[d.x] = d.y1;\n    });\n    return maxDict;\n}\n\n// custom function to provide correct animation effect\n// bars should fade into the top of the remaining bar\nfunction myHeight(chosen, d, clusterNames, binNames, y, heights) {\n    if (chosen.cluster == null) {\n        return 0;\n    }\n    if (clusterNames.indexOf(chosen.cluster) > clusterNames.indexOf(d.cluster)) {\n        return y(0);\n    } else {\n        return y(heights[chosen.cluster][binNames.indexOf(d.x)]);\n    }\n}\n\n\n// handy function to play the update game with the bars and legend\nfunction choice(variable, target, nullCase, targetCase, notTargetCase) {\n    switch (variable) {\n        case null:\n            return nullCase;\n        case target:\n            return targetCase;\n        default:\n            return notTargetCase;\n    }\n}\n\n\nfunction initializeScales(width, height) {\n    var x = d3.scaleBand()\n        .rangeRound([0, width])\n        .padding(0.5);\n\n    var y = d3.scaleLinear()\n        .range([height, 0]).nice();\n\n    return {\n        x: x,\n        y: y\n    };\n}\n\n\nfunction initializeAxis(svg, x, y, height, width) {\n    var yAxis = d3.axisLeft(y)\n\n    aspt.animatedSvg.append('g')\n        .attr('class', 'axisY')\n        .call(yAxis);\n\n    aspt.animatedSvg.append('g')\n        .attr('class', 'axisX')\n        .attr('transform', 'translate(0,' + height + ')')\n        .call(d3.axisBottom(x));\n}\n\n\nfunction setUpSvgCanvas(input) {\n\n    return {\n        svg: aspt.animatedSvg,\n        margin: aspt.animatedSvgMargin,\n        width: aspt.width,\n        height: aspt.height\n    };\n}\n\n\nfunction setUpColors() {\n    return d3.scaleOrdinal().range([\"#b30000\", \"#e60000\", \"#ff3333\", \"#129812\"])\n\n}\n\n\n// formatting Data to a more d3-friendly format\n// extracting binNames and clusterNames\nfunction formatData(data) {\n\n    var clusterNames = [\"Critically Endangered\", \"Endangered\", \"Vulnerable\", \"Safe\"];\n\n    var binNames = [];\n\n    var blockData = [];\n\n    for (var i = 0; i < data.length; i++) {\n        var y = 0;\n        binNames.push(data[i].Type);\n        for (var j = 0; j < clusterNames.length; j++) {\n            var height = parseFloat(data[i][clusterNames[j]]);\n            var block = {\n                'y0': parseFloat(y),\n                'y1': parseFloat(y) + parseFloat(height),\n                'height': height,\n                'x': data[i].Type,\n                'cluster': clusterNames[j]\n            };\n            y += parseFloat(data[i][clusterNames[j]]);\n            blockData.push(block);\n        }\n    }\n    return {\n        blockData: blockData,\n        binNames: binNames,\n        clusterNames: clusterNames\n    };\n\n}\n\nexport {drawBars, update}"],"sourceRoot":""}